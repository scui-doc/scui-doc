(window.webpackJsonp=window.webpackJsonp||[]).push([["setting-menu"],{"3d6e":function(e,t,n){"use strict";n("d11c")},c584:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r={class:"custom-tree-node el-tree-node__label"},c={class:"label"},a={class:"do"};var i=n("c7eb"),u=n("1da1"),s=(n("4de4"),n("d3b7"),n("99af"),n("d81d"),n("159b"),n("0dc2")),l=1,d={name:"settingMenu",components:{save:s.default},data:function(){return{menuloading:!1,menuList:[],menuProps:{label:function(e){return e.meta.title}},menuFilterText:""}},watch:{menuFilterText:function(e){this.$refs.menu.filter(e)}},mounted:function(){this.getMenu()},methods:{getMenu:function(){var e=this;return Object(u.a)(Object(i.a)().mark((function t(){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuloading=!0,t.next=3,e.$API.system.menu.list.get();case 3:n=t.sent,e.menuloading=!1,e.menuList=n.data;case 6:case"end":return t.stop()}}),t)})))()},menuClick:function(e,t){var n=1==t.level?void 0:t.parent.data.id;this.$refs.save.setData(e,n),this.$refs.main.$el.scrollTop=0},menuFilterNode:function(e,t){return!e||-1!==t.meta.title.indexOf(e)},nodeDrop:function(e,t,n){this.$refs.save.setData({}),this.$message("拖拽对象：".concat(e.data.meta.title,", 释放对象：").concat(t.data.meta.title,", 释放对象的位置：").concat(n))},add:function(e,t){var n=this;return Object(u.a)(Object(i.a)().mark((function o(){var r,c,a,u;return Object(i.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r="未命名"+l++,c={parentId:t?t.id:"",name:r,path:"",component:"",meta:{title:r,type:"menu"}},n.menuloading=!0,o.next=5,n.$API.demo.post.post(c);case 5:a=o.sent,n.menuloading=!1,c.id=a.data,n.$refs.menu.append(c,e),n.$refs.menu.setCurrentKey(c.id),u=e?e.data.id:"",n.$refs.save.setData(c,u);case 12:case"end":return o.stop()}}),o)})))()},delMenu:function(){var e=this;return Object(u.a)(Object(i.a)().mark((function t(){var n,o,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=(n=e.$refs.menu.getCheckedNodes()).length){t.next=4;break}return e.$message.warning("请选择需要删除的项"),t.abrupt("return",!1);case 4:return t.next=6,e.$confirm("确认删除已选择的菜单吗？","提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch((function(){}));case 6:if("confirm"==t.sent){t.next=9;break}return t.abrupt("return",!1);case 9:return e.menuloading=!0,o={ids:n.map((function(e){return e.id}))},t.next=13,e.$API.demo.post.post(o);case 13:r=t.sent,e.menuloading=!1,200==r.code?n.forEach((function(t){e.$refs.menu.getNode(t).isCurrent&&e.$refs.save.setData({}),e.$refs.menu.remove(t)})):e.$message.warning(r.message);case 16:case"end":return t.stop()}}),t)})))()}}},m=(n("3d6e"),n("6b0d"));const f=n.n(m)()(d,[["render",function(e,t,n,i,u,s){var l=Object(o.resolveComponent)("el-input"),d=Object(o.resolveComponent)("el-header"),m=Object(o.resolveComponent)("el-icon-plus"),f=Object(o.resolveComponent)("el-icon"),p=Object(o.resolveComponent)("el-tree"),b=Object(o.resolveComponent)("el-main"),O=Object(o.resolveComponent)("el-button"),j=Object(o.resolveComponent)("el-footer"),h=Object(o.resolveComponent)("el-container"),v=Object(o.resolveComponent)("el-aside"),g=Object(o.resolveComponent)("save"),C=Object(o.resolveDirective)("loading");return Object(o.openBlock)(),Object(o.createBlock)(h,null,{default:Object(o.withCtx)((function(){return[Object(o.withDirectives)((Object(o.openBlock)(),Object(o.createBlock)(v,{width:"300px"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(h,null,{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(d,null,{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(l,{placeholder:"输入关键字进行过滤",modelValue:u.menuFilterText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.menuFilterText=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(b,{class:"nopadding"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(p,{ref:"menu",class:"menu","node-key":"id",data:u.menuList,props:u.menuProps,draggable:"","highlight-current":"","expand-on-click-node":!1,"check-strictly":"","show-checkbox":"","filter-node-method":s.menuFilterNode,onNodeClick:s.menuClick,onNodeDrop:s.nodeDrop},{default:Object(o.withCtx)((function(e){var t=e.node,n=e.data;return[Object(o.createElementVNode)("span",r,[Object(o.createElementVNode)("span",c,Object(o.toDisplayString)(t.label),1),Object(o.createElementVNode)("span",a,[Object(o.createVNode)(f,{onClick:Object(o.withModifiers)((function(e){return s.add(t,n)}),["stop"])},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(m)]})),_:2},1032,["onClick"])])])]})),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])]})),_:1}),Object(o.createVNode)(j,{style:{height:"51px"}},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(O,{type:"primary",size:"small",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(e){return s.add()})}),Object(o.createVNode)(O,{type:"danger",size:"small",plain:"",icon:"el-icon-delete",onClick:s.delMenu},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1})),[[C,u.menuloading]]),Object(o.createVNode)(h,null,{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(b,{class:"nopadding",style:{padding:"20px"},ref:"main"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(g,{ref:"save",menu:u.menuList},null,8,["menu"])]})),_:1},512)]})),_:1})]})),_:1})}],["__scopeId","data-v-64614b21"]]);t.default=f},d11c:function(e,t,n){}}]);