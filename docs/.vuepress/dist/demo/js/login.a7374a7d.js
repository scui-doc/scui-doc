"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4535],{96987:function(e,l,a){a.r(l),a.d(l,{default:function(){return L}});var i=a(66252),o=a(3577);const s=e=>((0,i.dD)("data-v-37174ed0"),e=e(),(0,i.Cn)(),e),t={class:"login_bg"},n={class:"login_adv",style:{"background-image":"url(img/auth_banner.jpg)"}},r={class:"login_adv__title"},u=s((()=>(0,i._)("h2",null,"SCUI",-1))),d=s((()=>(0,i._)("div",{class:"login_adv__mask"},null,-1))),m={class:"login_adv__bottom"},c={class:"login_main"},g={class:"login_config"},p=s((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},[(0,i._)("path",{d:"M478.33 433.6l-90-218a22 22 0 0 0-40.67 0l-90 218a22 22 0 1 0 40.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 0 0 458 464a22 22 0 0 0 20.32-30.4zM334.83 362L368 281.65L401.17 362z",fill:"currentColor"}),(0,i._)("path",{d:"M267.84 342.92a22 22 0 0 0-4.89-30.7c-.2-.15-15-11.13-36.49-34.73c39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 0 0 0-44H214V70a22 22 0 0 0-44 0v20H54a22 22 0 0 0 0 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36c-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 0 0-40.58 17c.58 1.38 14.55 34.23 52.86 83.93c.92 1.19 1.83 2.35 2.74 3.51c-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1 0 21.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59c22.52 24.08 38 35.44 38.93 36.1a22 22 0 0 0 30.75-4.9z",fill:"currentColor"})],-1))),h={class:"login-form"},w={class:"login-header"},_={class:"logo"},f=["alt"],v={class:"login-oauth"};function $(e,l,a,s,$,O){const k=(0,i.up)("sc-icon-vue"),W=(0,i.up)("el-icon"),L=(0,i.up)("el-icon-plus"),P=(0,i.up)("el-icon-eleme-filled"),b=(0,i.up)("el-button"),F=(0,i.up)("el-dropdown-item"),A=(0,i.up)("el-dropdown-menu"),T=(0,i.up)("el-dropdown"),y=(0,i.up)("el-option"),I=(0,i.up)("el-select"),C=(0,i.up)("el-input"),N=(0,i.up)("el-form-item"),E=(0,i.up)("el-checkbox"),z=(0,i.up)("el-col"),M=(0,i.up)("el-link"),V=(0,i.up)("el-form"),x=(0,i.up)("el-divider");return(0,i.wg)(),(0,i.iD)("div",t,[(0,i._)("div",n,[(0,i._)("div",r,[u,(0,i._)("h4",null,(0,o.zw)(e.$t("login.slogan")),1),(0,i._)("p",null,(0,o.zw)(e.$t("login.describe")),1),(0,i._)("div",null,[(0,i._)("span",null,[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k)])),_:1})]),(0,i._)("span",null,[(0,i.Wm)(W,{class:"add"},{default:(0,i.w5)((()=>[(0,i.Wm)(L)])),_:1})]),(0,i._)("span",null,[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)(P)])),_:1})])])]),d,(0,i._)("div",m," © "+(0,o.zw)(e.$CONFIG.APP_NAME)+" "+(0,o.zw)(e.$CONFIG.APP_VER),1)]),(0,i._)("div",c,[(0,i._)("div",g,[(0,i.Wm)(b,{icon:$.config.dark?"el-icon-sunny":"el-icon-moon",circle:"",type:"info",onClick:O.configDark},null,8,["icon","onClick"]),(0,i.Wm)(T,{trigger:"click",placement:"bottom-end",onCommand:O.configLang},{dropdown:(0,i.w5)((()=>[(0,i.Wm)(A,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.lang,(e=>((0,i.wg)(),(0,i.j4)(F,{key:e.value,command:e,class:(0,o.C_)({selected:$.config.lang==e.value})},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["command","class"])))),128))])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{circle:""},{default:(0,i.w5)((()=>[p])),_:1})])),_:1},8,["onCommand"])]),(0,i._)("div",h,[(0,i._)("div",w,[(0,i._)("div",_,[(0,i._)("img",{alt:e.$CONFIG.APP_NAME,src:"img/logo.png"},null,8,f),(0,i._)("label",null,(0,o.zw)(e.$CONFIG.APP_NAME),1)]),(0,i._)("h2",null,(0,o.zw)(e.$t("login.signInTitle")),1)]),(0,i.Wm)(V,{ref:"loginForm",model:$.ruleForm,rules:$.rules,"label-width":"0",size:"large"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{prop:"user"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{modelValue:$.ruleForm.user,"onUpdate:modelValue":l[1]||(l[1]=e=>$.ruleForm.user=e),"prefix-icon":"el-icon-user",clearable:"",placeholder:e.$t("login.userPlaceholder")},{append:(0,i.w5)((()=>[(0,i.Wm)(I,{modelValue:$.userType,"onUpdate:modelValue":l[0]||(l[0]=e=>$.userType=e),style:{width:"130px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{label:e.$t("login.admin"),value:"admin"},null,8,["label"]),(0,i.Wm)(y,{label:e.$t("login.user"),value:"user"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue","placeholder"])])),_:1}),(0,i.Wm)(N,{prop:"password"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{modelValue:$.ruleForm.password,"onUpdate:modelValue":l[2]||(l[2]=e=>$.ruleForm.password=e),"prefix-icon":"el-icon-lock",clearable:"","show-password":"",placeholder:e.$t("login.PWPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,i.Wm)(N,{style:{"margin-bottom":"10px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{span:12},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{label:e.$t("login.rememberMe"),modelValue:$.ruleForm.autologin,"onUpdate:modelValue":l[3]||(l[3]=e=>$.ruleForm.autologin=e)},null,8,["label","modelValue"])])),_:1}),(0,i.Wm)(z,{span:12,style:{"text-align":"right"}},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{type:"primary",underline:!1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("login.forgetPassword"))+"？",1)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(N,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,{type:"primary",style:{width:"100%"},loading:$.islogin,round:"",onClick:O.login},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"]),(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.$t("login.signInOther")),1)])),_:1}),(0,i._)("div",v,[(0,i.Wm)(b,{size:"small",type:"success",icon:"sc-icon-wechat",circle:""})])])])])}var O={data(){return{userType:"admin",ruleForm:{user:"admin",password:"admin",autologin:!1},rules:{user:[{required:!0,message:this.$t("login.userError"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.PWError"),trigger:"blur"}]},islogin:!1,config:{lang:this.$TOOL.data.get("APP_LANG")||this.$CONFIG.LANG,dark:this.$TOOL.data.get("APP_DARK")||!1},lang:[{name:"简体中文",value:"zh-cn"},{name:"English",value:"en"},{name:"日本語",value:"ja"}]}},watch:{userType(e){"admin"==e?(this.ruleForm.user="admin",this.ruleForm.password="admin"):"user"==e&&(this.ruleForm.user="user",this.ruleForm.password="user")},"config.dark"(e){e?(document.documentElement.classList.add("dark"),this.$TOOL.data.set("APP_DARK",e)):(document.documentElement.classList.remove("dark"),this.$TOOL.data.remove("APP_DARK"))},"config.lang"(e){this.$i18n.locale=e,this.$TOOL.data.set("APP_LANG",e)}},created:function(){this.$TOOL.cookie.remove("TOKEN"),this.$TOOL.data.remove("USER_INFO"),this.$TOOL.data.remove("MENU"),this.$TOOL.data.remove("PERMISSIONS"),this.$TOOL.data.remove("grid"),this.$store.commit("clearViewTags"),this.$store.commit("clearKeepLive"),this.$store.commit("clearIframeList"),console.log("%c SCUI %c Gitee: https://gitee.com/lolicode/scui","background:#666;color:#fff;border-radius:3px;","")},methods:{async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1;this.islogin=!0;var l={username:this.ruleForm.user,password:this.$TOOL.crypto.MD5(this.ruleForm.password)},a=await this.$API.auth.token.post(l);if(200!=a.code)return this.islogin=!1,this.$message.warning(a.message),!1;this.$TOOL.cookie.set("TOKEN",a.data.token,{expires:this.ruleForm.autologin?86400:0}),this.$TOOL.data.set("USER_INFO",a.data.userInfo);var i=null;return i="admin"==this.ruleForm.user?await this.$API.system.menu.myMenus.get():await this.$API.demo.menu.get(),200!=i.code?(this.islogin=!1,this.$message.warning(i.message),!1):0==i.data.menu.length?(this.islogin=!1,this.$alert("当前用户无任何菜单权限，请联系系统管理员","无权限访问",{type:"error",center:!0}),!1):(this.$TOOL.data.set("MENU",i.data.menu),this.$TOOL.data.set("PERMISSIONS",i.data.permissions),this.$router.replace({path:"/"}),this.$message.success("Login Success 登录成功"),void(this.islogin=!1))},configDark(){this.config.dark=!this.config.dark},configLang(e){this.config.lang=e.value}}},k=a(83744);const W=(0,k.Z)(O,[["render",$],["__scopeId","data-v-37174ed0"]]);var L=W}}]);