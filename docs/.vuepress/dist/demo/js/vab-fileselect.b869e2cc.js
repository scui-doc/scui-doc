(window.webpackJsonp=window.webpackJsonp||[]).push([["vab-fileselect","chunk-3f85ab0f"],{"84c1":function(e,t,l){"use strict";l.r(t);l("ac1f"),l("841c"),l("b0c0"),l("caad"),l("2532");var c=l("7a23"),o=function(e){return Object(c.pushScopeId)("data-v-c1c1a498"),e=e(),Object(c.popScopeId)(),e},n={class:"sc-file-select"},a={class:"sc-file-select__side"},i={class:"sc-file-select__side-menu"},r={class:"el-tree-node__label"},s=o((function(){return Object(c.createElementVNode)("i",{class:"el-icon-folder icon"},null,-1)})),u={key:0,class:"sc-file-select__side-msg"},d=Object(c.createTextVNode)(" 已选择 "),p=Object(c.createTextVNode)(" / "),f=Object(c.createTextVNode)(" 项 "),m={class:"sc-file-select__files"},b={class:"sc-file-select__top"},O={key:0,class:"upload"},j=Object(c.createTextVNode)("本地上传"),g={class:"tips"},h=o((function(){return Object(c.createElementVNode)("i",{class:"el-icon-warning-outline"},null,-1)})),v={class:"keyword"},k={class:"sc-file-select__list"},N={class:"sc-file-select__item__file"},V={class:"sc-file-select__item__upload"},_=["onClick"],y={class:"sc-file-select__item__file"},x={key:0,class:"sc-file-select__item__checkbox"},C=[o((function(){return Object(c.createElementVNode)("i",{class:"el-icon-check"},null,-1)}))],w={key:1,class:"sc-file-select__item__select"},E=[o((function(){return Object(c.createElementVNode)("i",{class:"el-icon-check"},null,-1)}))],P=o((function(){return Object(c.createElementVNode)("div",{class:"sc-file-select__item__box"},null,-1)})),B={key:3,class:"item-file item-file-doc"},S={key:1,class:"sc-icon-file-list-fill",style:{color:"#999"}},z=["title"],D={class:"sc-file-select__pagination"},I={class:"sc-file-select__do"},L=Object(c.createTextVNode)("确 定");var U=l("ade3"),T=l("1da1"),q=(l("96cf"),l("a9e3"),l("a434"),l("c740"),l("d3b7"),l("3ca3"),l("ddb0"),l("2b3d"),l("9861"),l("b680"),l("365c")),F={apiObj:q.a.common.upload,menuApiObj:q.a.common.file.menu,listApiObj:q.a.common.file.list,successCode:200,maxSize:30,max:99,uploadParseData:function(e){return{id:e.data.id,fileName:e.data.fileName,url:e.data.src}},listParseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},request:{page:"page",pageSize:"pageSize",keyword:"keyword",menuKey:"groupId"},menuProps:{key:"id",label:"label",children:"children"},fileProps:{key:"id",fileName:"fileName",url:"url"},files:{doc:{icon:"sc-icon-file-word-2-fill",color:"#409eff"},docx:{icon:"sc-icon-file-word-2-fill",color:"#409eff"},xls:{icon:"sc-icon-file-excel-2-fill",color:"#67C23A"},xlsx:{icon:"sc-icon-file-excel-2-fill",color:"#67C23A"},ppt:{icon:"sc-icon-file-ppt-2-fill",color:"#F56C6C"},pptx:{icon:"sc-icon-file-ppt-2-fill",color:"#F56C6C"}}},R={props:{modelValue:null,hideUpload:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},max:{type:Number,default:F.max},onlyImage:{type:Boolean,default:!1},maxSize:{type:Number,default:F.maxSize}},data:function(){return{keyword:null,pageSize:20,total:0,currentPage:1,data:[],menu:[],menuId:"",value:this.multiple?[]:"",fileList:[],accept:this.onlyImage?"image/gif, image/jpeg, image/png":"",listLoading:!1,menuLoading:!1,treeProps:F.menuProps,fileProps:F.fileProps,files:F.files}},watch:{multiple:function(){this.value=this.multiple?[]:"",this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.value)))}},mounted:function(){this.getMenu(),this.getData()},methods:{getMenu:function(){var e=this;return Object(T.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuLoading=!0,t.next=3,F.menuApiObj.get();case 3:l=t.sent,e.menu=l.data,e.menuLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(T.a)(regeneratorRuntime.mark((function t(){var l,c,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,l={},Object(U.a)(l,F.request.menuKey,e.menuId),Object(U.a)(l,F.request.page,e.currentPage),Object(U.a)(l,F.request.pageSize,e.pageSize),Object(U.a)(l,F.request.keyword,e.keyword),c=l,e.onlyImage&&(c.type="image"),t.next=5,F.listApiObj.get(c);case 5:o=t.sent,n=F.listParseData(o),e.data=n.rows,e.total=n.total,e.listLoading=!1,e.$refs.scrollbar.setScrollTop(0);case 11:case"end":return t.stop()}}),t)})))()},groupClick:function(e){this.menuId=e.id,this.currentPage=1,this.keyword=null,this.getData()},reload:function(){this.getData()},search:function(){this.currentPage=1,this.getData()},select:function(e){var t=e[this.fileProps.url];this.multiple?this.value.includes(t)?this.value.splice(this.value.findIndex((function(e){return e==t})),1):this.value.push(t):this.value.includes(t)?this.value="":this.value=t},submit:function(){var e=JSON.parse(JSON.stringify(this.value));this.$emit("update:modelValue",e),this.$emit("submit",e)},uploadChange:function(e,t){e.tempImg=URL.createObjectURL(e.raw),this.fileList=t},uploadBefore:function(e){if(!(e.size/1024/1024<this.maxSize))return this.$message.warning("上传文件大小不能超过 ".concat(this.maxSize,"MB!")),!1},uploadRequest:function(e){var t=F.apiObj,l=new FormData;l.append("file",e.file),l.append([F.request.menuKey],this.menuId),t.post(l,{onUploadProgress:function(t){e.onProgress(t)}}).then((function(t){e.onSuccess(t)})).catch((function(t){e.onError(t)}))},uploadProcess:function(e,t){t.progress=Number((e.loaded/e.total*100).toFixed(2))},uploadSuccess:function(e,t){var l;this.fileList.splice(this.fileList.findIndex((function(e){return e.uid==t.uid})),1);var c=F.uploadParseData(e);this.data.unshift((l={},Object(U.a)(l,this.fileProps.key,c.id),Object(U.a)(l,this.fileProps.fileName,c.fileName),Object(U.a)(l,this.fileProps.url,c.url),l)),this.multiple||(this.value=c.url)},uploadError:function(e){this.$notify.error({title:"上传文件错误",message:e})},_isImg:function(e){var t=e.substring(e.lastIndexOf("."));return-1!=[".jpg",".jpeg",".png",".gif",".bmp"].indexOf(t)},_getExt:function(e){return e.substring(e.lastIndexOf(".")+1)}}},$=(l("adcb"),l("6b0d"));const A=l.n($)()(R,[["render",function(e,t,l,o,U,T){var q=Object(c.resolveComponent)("el-tree"),F=Object(c.resolveComponent)("el-button"),R=Object(c.resolveComponent)("el-upload"),$=Object(c.resolveComponent)("el-input"),A=Object(c.resolveComponent)("el-empty"),J=Object(c.resolveComponent)("el-progress"),K=Object(c.resolveComponent)("el-image"),M=Object(c.resolveComponent)("el-scrollbar"),G=Object(c.resolveComponent)("el-pagination"),H=Object(c.resolveDirective)("loading");return Object(c.openBlock)(),Object(c.createElementBlock)("div",n,[Object(c.withDirectives)(Object(c.createElementVNode)("div",a,[Object(c.createElementVNode)("div",i,[Object(c.createVNode)(q,{ref:"group",class:"menu",data:U.menu,"node-key":U.treeProps.key,props:U.treeProps,"current-node-key":U.menu.length>0?U.menu[0][U.treeProps.key]:"","highlight-current":"",onNodeClick:T.groupClick},{default:Object(c.withCtx)((function(e){var t=e.node;return[Object(c.createElementVNode)("span",r,[s,Object(c.createTextVNode)(Object(c.toDisplayString)(t.label),1)])]})),_:1},8,["data","node-key","props","current-node-key","onNodeClick"])]),l.multiple?(Object(c.openBlock)(),Object(c.createElementBlock)("div",u,[d,Object(c.createElementVNode)("b",null,Object(c.toDisplayString)(U.value.length),1),p,Object(c.createElementVNode)("b",null,Object(c.toDisplayString)(l.max),1),f])):Object(c.createCommentVNode)("",!0)],512),[[H,U.menuLoading]]),Object(c.withDirectives)(Object(c.createElementVNode)("div",m,[Object(c.createElementVNode)("div",b,[l.hideUpload?Object(c.createCommentVNode)("",!0):(Object(c.openBlock)(),Object(c.createElementBlock)("div",O,[Object(c.createVNode)(R,{class:"sc-file-select__upload",action:"",multiple:"","show-file-list":!1,accept:U.accept,"on-change":T.uploadChange,"before-upload":T.uploadBefore,"on-progress":T.uploadProcess,"on-success":T.uploadSuccess,"on-error":T.uploadError,"http-request":T.uploadRequest},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(F,{type:"primary",icon:"el-icon-upload2"},{default:Object(c.withCtx)((function(){return[j]})),_:1})]})),_:1},8,["accept","on-change","before-upload","on-progress","on-success","on-error","http-request"]),Object(c.createElementVNode)("span",g,[h,Object(c.createTextVNode)("大小不超过"+Object(c.toDisplayString)(l.maxSize)+"MB",1)])])),Object(c.createElementVNode)("div",v,[Object(c.createVNode)($,{modelValue:U.keyword,"onUpdate:modelValue":t[0]||(t[0]=function(e){return U.keyword=e}),"prefix-icon":"el-icon-search",placeholder:"文件名搜索",clearable:"",onKeyup:Object(c.withKeys)(T.search,["enter"]),onClear:T.search},null,8,["modelValue","onKeyup","onClear"])])]),Object(c.createElementVNode)("div",k,[Object(c.createVNode)(M,{ref:"scrollbar"},{default:Object(c.withCtx)((function(){return[0==U.fileList.length&&0==U.data.length?(Object(c.openBlock)(),Object(c.createBlock)(A,{key:0,description:"无数据","image-size":80})):Object(c.createCommentVNode)("",!0),(Object(c.openBlock)(!0),Object(c.createElementBlock)(c.Fragment,null,Object(c.renderList)(U.fileList,(function(e,t){return Object(c.openBlock)(),Object(c.createElementBlock)("div",{key:t,class:"sc-file-select__item"},[Object(c.createElementVNode)("div",N,[Object(c.createElementVNode)("div",V,[Object(c.createVNode)(J,{type:"circle",percentage:e.progress,width:70},null,8,["percentage"])]),Object(c.createVNode)(K,{src:e.tempImg,fit:"contain"},null,8,["src"])]),Object(c.createElementVNode)("p",null,Object(c.toDisplayString)(e.name),1)])})),128)),(Object(c.openBlock)(!0),Object(c.createElementBlock)(c.Fragment,null,Object(c.renderList)(U.data,(function(e){return Object(c.openBlock)(),Object(c.createElementBlock)("div",{key:e[U.fileProps.key],class:Object(c.normalizeClass)(["sc-file-select__item",{active:U.value.includes(e[U.fileProps.url])}]),onClick:function(t){return T.select(e)}},[Object(c.createElementVNode)("div",y,[l.multiple?(Object(c.openBlock)(),Object(c.createElementBlock)("div",x,C)):(Object(c.openBlock)(),Object(c.createElementBlock)("div",w,E)),P,T._isImg(e[U.fileProps.url])?(Object(c.openBlock)(),Object(c.createBlock)(K,{key:2,src:e[U.fileProps.url],fit:"contain",lazy:""},null,8,["src"])):(Object(c.openBlock)(),Object(c.createElementBlock)("div",B,[U.files[T._getExt(e[U.fileProps.url])]?(Object(c.openBlock)(),Object(c.createElementBlock)("i",{key:0,class:Object(c.normalizeClass)(U.files[T._getExt(e[U.fileProps.url])].icon),style:Object(c.normalizeStyle)({color:U.files[T._getExt(e[U.fileProps.url])].color})},null,6)):(Object(c.openBlock)(),Object(c.createElementBlock)("i",S))]))]),Object(c.createElementVNode)("p",{title:e[U.fileProps.fileName]},Object(c.toDisplayString)(e[U.fileProps.fileName]),9,z)],10,_)})),128))]})),_:1},512)]),Object(c.createElementVNode)("div",D,[Object(c.createVNode)(G,{small:"",background:"",layout:"prev, pager, next",total:U.total,"page-size":U.pageSize,currentPage:U.currentPage,"onUpdate:currentPage":t[1]||(t[1]=function(e){return U.currentPage=e}),onCurrentChange:T.reload},null,8,["total","page-size","currentPage","onCurrentChange"])]),Object(c.createElementVNode)("div",I,[Object(c.renderSlot)(e.$slots,"do",{},void 0,!0),Object(c.createVNode)(F,{type:"primary",disabled:U.value.length<=0,onClick:T.submit},{default:Object(c.withCtx)((function(){return[L]})),_:1},8,["disabled","onClick"])])],512),[[H,U.listLoading]])])}],["__scopeId","data-v-c1c1a498"]]);t.default=A},a1bd:function(e,t,l){},a651:function(e,t,l){"use strict";l.r(t);var c=l("7a23"),o=Object(c.createTextVNode)("自定义插槽"),n={style:{"margin-top":"15px"}},a=Object(c.createTextVNode)("切换multiple"),i=Object(c.createTextVNode)("切换hideUpload");var r={name:"fileselect",components:{scFileSelect:l("84c1").default},data:function(){return{file:"",multiple:!1,hideUpload:!1,upload:"",upload2:""}},mounted:function(){},methods:{submit:function(e){console.log(e),this.$message("返回值请查看F12控制台console.log()")}}},s=l("6b0d");const u=l.n(s)()(r,[["render",function(e,t,l,r,s,u){var d=Object(c.resolveComponent)("el-button"),p=Object(c.resolveComponent)("sc-file-select"),f=Object(c.resolveComponent)("el-card"),m=Object(c.resolveComponent)("sc-upload"),b=Object(c.resolveComponent)("sc-upload-multiple"),O=Object(c.resolveComponent)("el-col"),j=Object(c.resolveComponent)("el-row"),g=Object(c.resolveComponent)("el-main");return Object(c.openBlock)(),Object(c.createBlock)(g,null,{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(j,{gutter:15},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(O,{lg:18},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(f,{shadow:"never"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(p,{modelValue:s.file,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.file=e}),multiple:s.multiple,hideUpload:s.hideUpload,max:99,onSubmit:u.submit},{do:Object(c.withCtx)((function(){return[Object(c.createVNode)(d,null,{default:Object(c.withCtx)((function(){return[o]})),_:1})]})),_:1},8,["modelValue","multiple","hideUpload","onSubmit"])]})),_:1}),Object(c.createVNode)(f,{shadow:"never",header:"已集成的上传组件"},{default:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("p",null,[Object(c.createVNode)(m,{modelValue:s.upload,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.upload=e}),title:"单选","file-select":""},null,8,["modelValue"])]),Object(c.createElementVNode)("p",n,[Object(c.createVNode)(b,{modelValue:s.upload2,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.upload2=e}),title:"多选","file-select":""},null,8,["modelValue"])])]})),_:1})]})),_:1}),Object(c.createVNode)(O,{lg:6},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(f,{shadow:"never",header:"参数和方法"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(d,{type:"primary",onClick:t[3]||(t[3]=function(e){return s.multiple=!s.multiple})},{default:Object(c.withCtx)((function(){return[a]})),_:1}),Object(c.createVNode)(d,{type:"primary",onClick:t[4]||(t[4]=function(e){return s.hideUpload=!s.hideUpload})},{default:Object(c.withCtx)((function(){return[i]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}]]);t.default=u},adcb:function(e,t,l){"use strict";l("a1bd")}}]);