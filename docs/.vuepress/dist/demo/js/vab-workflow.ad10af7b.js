"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1292],{73647:function(e,l,o){o.r(l),o.d(l,{default:function(){return Kl}});var t=o(66252);const d={class:"do"},i=(0,t.Uk)("export JSON");function a(e,l,o,a,n,s){const r=(0,t.up)("el-page-header"),u=(0,t.up)("el-button"),c=(0,t.up)("el-header"),p=(0,t.up)("sc-workflow"),m=(0,t.up)("el-main"),f=(0,t.up)("el-container");return(0,t.wg)(),(0,t.j4)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{content:n.data.name},null,8,["content"]),(0,t._)("div",d,[(0,t.Wm)(u,{type:"primary",onClick:s.exportJson},{default:(0,t.w5)((()=>[i])),_:1},8,["onClick"])])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:n.data.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>n.data.nodeConfig=e)},null,8,["modelValue"])])),_:1})])),_:1})}const n={class:"sc-workflow-design"},s={class:"box-scale"},r=(0,t._)("div",{class:"end-node"},[(0,t._)("div",{class:"end-node-circle"}),(0,t._)("div",{class:"end-node-text"},"流程结束")],-1);function u(e,l,o,d,i,a){const u=(0,t.up)("node-wrap"),c=(0,t.up)("use-select");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",s,[i.nodeConfig?((0,t.wg)(),(0,t.j4)(u,{key:0,modelValue:i.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.kq)("",!0),r]),i.selectVisible?((0,t.wg)(),(0,t.j4)(c,{key:0,ref:"useselect",onClosed:l[1]||(l[1]=e=>i.selectVisible=!1)},null,512)):(0,t.kq)("",!0)])}function c(e,l,o,d,i,a){const n=(0,t.up)("promoter"),s=(0,t.up)("approver"),r=(0,t.up)("send"),u=(0,t.up)("node-wrap",!0),c=(0,t.up)("branch");return(0,t.wg)(),(0,t.iD)(t.HY,null,[0==i.nodeConfig.type?((0,t.wg)(),(0,t.j4)(n,{key:0,modelValue:i.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.kq)("",!0),1==i.nodeConfig.type?((0,t.wg)(),(0,t.j4)(s,{key:1,modelValue:i.nodeConfig,"onUpdate:modelValue":l[1]||(l[1]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.kq)("",!0),2==i.nodeConfig.type?((0,t.wg)(),(0,t.j4)(r,{key:2,modelValue:i.nodeConfig,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,t.kq)("",!0),4==i.nodeConfig.type?((0,t.wg)(),(0,t.j4)(c,{key:3,modelValue:i.nodeConfig,"onUpdate:modelValue":l[3]||(l[3]=e=>i.nodeConfig=e)},{default:(0,t.w5)((e=>[e.node?((0,t.wg)(),(0,t.j4)(u,{key:0,modelValue:e.node.childNode,"onUpdate:modelValue":l=>e.node.childNode=l},null,8,["modelValue","onUpdate:modelValue"])):(0,t.kq)("",!0)])),_:1},8,["modelValue"])):(0,t.kq)("",!0),i.nodeConfig.childNode?((0,t.wg)(),(0,t.j4)(u,{key:4,modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[4]||(l[4]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"])):(0,t.kq)("",!0)],64)}var p=o(3577),m=o(49963);const f={class:"node-wrap"},h={class:"title",style:{background:"#ff943e"}},w={class:"content"},g={key:0},k={key:1,class:"placeholder"},_={class:"node-wrap-drawer__title"},y=(0,t.Uk)("选择人员"),C={class:"tags-list"},V=(0,t.Uk)(" 发起人的第 "),v=(0,t.Uk)(" 级主管 "),W=(0,t.Uk)("选择角色"),b={class:"tags-list"},U=(0,t.Uk)("自选一个人"),N=(0,t.Uk)("自选多个人"),T=(0,t.Uk)("直到最上层主管"),L=(0,t.Uk)("自定义审批终点"),x={key:0},D=(0,t.Uk)("直到发起人的第 "),j=(0,t.Uk)(" 级主管"),z=(0,t.Uk)(" 小时 "),q=(0,t.Uk)("自动通过"),M=(0,t.Uk)("自动拒绝"),$={style:{width:"100%"}},S=(0,t.Uk)("按顺序依次审批"),O={style:{width:"100%"}},R=(0,t.Uk)("会签 (可同时审批，每个人必须审批通过)"),E={style:{width:"100%"}},H=(0,t.Uk)("或签 (有一人审批通过即可)"),K=(0,t.Uk)("保存"),P=(0,t.Uk)("取消");function I(e,l,o,d,i,a){const n=(0,t.up)("el-icon-user-filled"),s=(0,t.up)("el-icon"),r=(0,t.up)("el-icon-close"),u=(0,t.up)("add-node"),c=(0,t.up)("el-icon-edit"),I=(0,t.up)("el-input"),J=(0,t.up)("el-option"),Z=(0,t.up)("el-select"),B=(0,t.up)("el-form-item"),G=(0,t.up)("el-button"),Y=(0,t.up)("el-tag"),A=(0,t.up)("el-input-number"),F=(0,t.up)("el-radio"),Q=(0,t.up)("el-radio-group"),X=(0,t.up)("el-divider"),ee=(0,t.up)("el-checkbox"),le=(0,t.up)("el-form"),oe=(0,t.up)("el-main"),te=(0,t.up)("el-footer"),de=(0,t.up)("el-container"),ie=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",{class:"node-wrap-box",onClick:l[1]||(l[1]=(...e)=>a.show&&a.show(...e))},[(0,t._)("div",h,[(0,t.Wm)(s,{class:"icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(n)])),_:1}),(0,t._)("span",null,(0,p.zw)(i.nodeConfig.nodeName),1),(0,t.Wm)(s,{class:"close",onClick:l[0]||(l[0]=(0,m.iM)((e=>a.delNode()),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(r)])),_:1})]),(0,t._)("div",w,[a.toText(i.nodeConfig)?((0,t.wg)(),(0,t.iD)("span",g,(0,p.zw)(a.toText(i.nodeConfig)),1)):((0,t.wg)(),(0,t.iD)("span",k,"请选择"))])]),(0,t.Wm)(u,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,t.Wm)(ie,{title:"审批人设置",modelValue:i.drawer,"onUpdate:modelValue":l[17]||(l[17]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,t.w5)((()=>[(0,t._)("div",_,[i.isEditTitle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("label",{key:0,onClick:l[3]||(l[3]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.Uk)((0,p.zw)(i.form.nodeName),1),(0,t.Wm)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,t.w5)((()=>[(0,t.Wm)(c)])),_:1})])),i.isEditTitle?((0,t.wg)(),(0,t.j4)(I,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,m.D2)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.kq)("",!0)])])),default:(0,t.w5)((()=>[(0,t.Wm)(de,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(le,{"label-position":"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{label:"审批人员类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{modelValue:i.form.setType,"onUpdate:modelValue":l[5]||(l[5]=e=>i.form.setType=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{value:1,label:"指定成员"}),(0,t.Wm)(J,{value:2,label:"主管"}),(0,t.Wm)(J,{value:3,label:"角色"}),(0,t.Wm)(J,{value:4,label:"发起人自选"}),(0,t.Wm)(J,{value:5,label:"发起人自己"}),(0,t.Wm)(J,{value:7,label:"连续多级主管"})])),_:1},8,["modelValue"])])),_:1}),1==i.form.setType?((0,t.wg)(),(0,t.j4)(B,{key:0,label:"选择成员"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[6]||(l[6]=e=>a.selectHandle(1,i.form.nodeUserList))},{default:(0,t.w5)((()=>[y])),_:1}),(0,t._)("div",C,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.form.nodeUserList,((e,l)=>((0,t.wg)(),(0,t.j4)(Y,{key:e.id,closable:"",onClose:e=>a.delUser(l)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,p.zw)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,t.kq)("",!0),2==i.form.setType?((0,t.wg)(),(0,t.j4)(B,{key:1,label:"指定主管"},{default:(0,t.w5)((()=>[V,(0,t.Wm)(A,{modelValue:i.form.examineLevel,"onUpdate:modelValue":l[7]||(l[7]=e=>i.form.examineLevel=e),min:1},null,8,["modelValue"]),v])),_:1})):(0,t.kq)("",!0),3==i.form.setType?((0,t.wg)(),(0,t.j4)(B,{key:2,label:"选择角色"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[8]||(l[8]=e=>a.selectHandle(2,i.form.nodeRoleList))},{default:(0,t.w5)((()=>[W])),_:1}),(0,t._)("div",b,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.form.nodeRoleList,((e,l)=>((0,t.wg)(),(0,t.j4)(Y,{key:e.id,type:"info",closable:"",onClose:e=>a.delRole(l)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,p.zw)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,t.kq)("",!0),4==i.form.setType?((0,t.wg)(),(0,t.j4)(B,{key:3,label:"发起人自选"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:i.form.selectMode,"onUpdate:modelValue":l[9]||(l[9]=e=>i.form.selectMode=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{label:1},{default:(0,t.w5)((()=>[U])),_:1}),(0,t.Wm)(F,{label:2},{default:(0,t.w5)((()=>[N])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,t.kq)("",!0),7==i.form.setType?((0,t.wg)(),(0,t.j4)(B,{key:4,label:"连续主管审批终点"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:i.form.directorMode,"onUpdate:modelValue":l[10]||(l[10]=e=>i.form.directorMode=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{label:0},{default:(0,t.w5)((()=>[T])),_:1}),(0,t.Wm)(F,{label:1},{default:(0,t.w5)((()=>[L])),_:1})])),_:1},8,["modelValue"]),1==i.form.directorMode?((0,t.wg)(),(0,t.iD)("p",x,[D,(0,t.Wm)(A,{modelValue:i.form.directorLevel,"onUpdate:modelValue":l[11]||(l[11]=e=>i.form.directorLevel=e),min:1},null,8,["modelValue"]),j])):(0,t.kq)("",!0)])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(X),(0,t.Wm)(B,{label:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ee,{modelValue:i.form.termAuto,"onUpdate:modelValue":l[12]||(l[12]=e=>i.form.termAuto=e),label:"超时自动审批"},null,8,["modelValue"])])),_:1}),i.form.termAuto?((0,t.wg)(),(0,t.iD)(t.HY,{key:5},[(0,t.Wm)(B,{label:"审批期限（为 0 则不生效）"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:i.form.term,"onUpdate:modelValue":l[13]||(l[13]=e=>i.form.term=e),min:0},null,8,["modelValue"]),z])),_:1}),(0,t.Wm)(B,{label:"审批期限超时后执行"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:i.form.termMode,"onUpdate:modelValue":l[14]||(l[14]=e=>i.form.termMode=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{label:0},{default:(0,t.w5)((()=>[q])),_:1}),(0,t.Wm)(F,{label:1},{default:(0,t.w5)((()=>[M])),_:1})])),_:1},8,["modelValue"])])),_:1})],64)):(0,t.kq)("",!0),(0,t.Wm)(X),(0,t.Wm)(B,{label:"多人审批时审批方式"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:i.form.examineMode,"onUpdate:modelValue":l[15]||(l[15]=e=>i.form.examineMode=e)},{default:(0,t.w5)((()=>[(0,t._)("p",$,[(0,t.Wm)(F,{label:1},{default:(0,t.w5)((()=>[S])),_:1})]),(0,t._)("p",O,[(0,t.Wm)(F,{label:2},{default:(0,t.w5)((()=>[R])),_:1})]),(0,t._)("p",E,[(0,t.Wm)(F,{label:3},{default:(0,t.w5)((()=>[H])),_:1})])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(te,null,{default:(0,t.w5)((()=>[(0,t.Wm)(G,{type:"primary",onClick:a.save},{default:(0,t.w5)((()=>[K])),_:1},8,["onClick"]),(0,t.Wm)(G,{onClick:l[16]||(l[16]=e=>i.drawer=!1)},{default:(0,t.w5)((()=>[P])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const J={class:"add-node-btn-box"},Z={class:"add-node-btn"},B={class:"add-node-popover-body"},G=(0,t._)("p",null,"审批节点",-1),Y=(0,t._)("p",null,"抄送节点",-1),A=(0,t._)("p",null,"条件分支",-1);function F(e,l,o,d,i,a){const n=(0,t.up)("el-button"),s=(0,t.up)("el-icon-user-filled"),r=(0,t.up)("el-icon"),u=(0,t.up)("el-icon-promotion"),c=(0,t.up)("el-icon-share"),p=(0,t.up)("el-popover");return(0,t.wg)(),(0,t.iD)("div",J,[(0,t._)("div",Z,[(0,t.Wm)(p,{placement:"right-start",width:270,trigger:"click","hide-after":0,"show-after":0},{reference:(0,t.w5)((()=>[(0,t.Wm)(n,{type:"primary",icon:"el-icon-plus",circle:""})])),default:(0,t.w5)((()=>[(0,t._)("div",B,[(0,t._)("ul",null,[(0,t._)("li",null,[(0,t.Wm)(r,{style:{color:"#ff943e"},onClick:l[0]||(l[0]=e=>a.addType(1))},{default:(0,t.w5)((()=>[(0,t.Wm)(s)])),_:1}),G]),(0,t._)("li",null,[(0,t.Wm)(r,{style:{color:"#3296fa"},onClick:l[1]||(l[1]=e=>a.addType(2))},{default:(0,t.w5)((()=>[(0,t.Wm)(u)])),_:1}),Y]),(0,t._)("li",null,[(0,t.Wm)(r,{style:{color:"#15BC83"},onClick:l[2]||(l[2]=e=>a.addType(4))},{default:(0,t.w5)((()=>[(0,t.Wm)(c)])),_:1}),A])])])])),_:1})])])}var Q={props:{modelValue:{type:Object,default:()=>{}}},data(){return{}},mounted(){},methods:{addType(e){var l={};1==e?l={nodeName:"审核人",type:1,setType:1,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0,childNode:this.modelValue}:2==e?l={nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[],childNode:this.modelValue}:4==e&&(l={nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"条件1",type:3,priorityLevel:1,conditionMode:1,conditionList:[]},{nodeName:"条件2",type:3,priorityLevel:2,conditionMode:1,conditionList:[]}],childNode:this.modelValue}),this.$emit("update:modelValue",l)}}},X=o(83744);const ee=(0,X.Z)(Q,[["render",F]]);var le=ee,oe={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:le},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},delRole(e){this.form.nodeRoleList.splice(e,1)},selectHandle(e,l){this.select(e,l)},toText(e){if(1==e.setType){if(e.nodeUserList&&e.nodeUserList.length>0){const l=e.nodeUserList.map((e=>e.name)).join("、");return l}return!1}if(2==e.setType)return 1==e.examineLevel?"直接主管":`发起人的第${e.examineLevel}级主管`;if(3==e.setType){if(e.nodeRoleList&&e.nodeRoleList.length>0){const l=e.nodeRoleList.map((e=>e.name)).join("、");return"角色-"+l}return!1}return 4==e.setType?"发起人自选":5==e.setType?"发起人自己":7==e.setType?"连续多级主管":void 0}}};const te=(0,X.Z)(oe,[["render",I]]);var de=te;const ie={class:"node-wrap"},ae={class:"title",style:{background:"#576a95"}},ne={class:"content"},se={class:"node-wrap-drawer__title"},re=(0,t.Uk)("选择角色"),ue={class:"tags-list"},ce=(0,t.Uk)("保存"),pe=(0,t.Uk)("取消");function me(e,l,o,d,i,a){const n=(0,t.up)("el-icon-user-filled"),s=(0,t.up)("el-icon"),r=(0,t.up)("add-node"),u=(0,t.up)("el-icon-edit"),c=(0,t.up)("el-input"),f=(0,t.up)("el-button"),h=(0,t.up)("el-tag"),w=(0,t.up)("el-form-item"),g=(0,t.up)("el-alert"),k=(0,t.up)("el-form"),_=(0,t.up)("el-main"),y=(0,t.up)("el-footer"),C=(0,t.up)("el-container"),V=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.iD)("div",ie,[(0,t._)("div",{class:"node-wrap-box start-node",onClick:l[0]||(l[0]=(...e)=>a.show&&a.show(...e))},[(0,t._)("div",ae,[(0,t.Wm)(s,{class:"icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(n)])),_:1}),(0,t._)("span",null,(0,p.zw)(i.nodeConfig.nodeName),1)]),(0,t._)("div",ne,[(0,t._)("span",null,(0,p.zw)(a.toText(i.nodeConfig)),1)])]),(0,t.Wm)(r,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[1]||(l[1]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,t.Wm)(V,{title:"发起人",modelValue:i.drawer,"onUpdate:modelValue":l[6]||(l[6]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,t.w5)((()=>[(0,t._)("div",se,[i.isEditTitle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("label",{key:0,onClick:l[2]||(l[2]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.Uk)((0,p.zw)(i.form.nodeName),1),(0,t.Wm)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,t.w5)((()=>[(0,t.Wm)(u)])),_:1})])),i.isEditTitle?((0,t.wg)(),(0,t.j4)(c,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,m.D2)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.kq)("",!0)])])),default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{"label-position":"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{label:"谁可以发起此审批"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[4]||(l[4]=e=>a.selectHandle(2,i.form.nodeRoleList))},{default:(0,t.w5)((()=>[re])),_:1}),(0,t._)("div",ue,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.form.nodeRoleList,((e,l)=>((0,t.wg)(),(0,t.j4)(h,{key:e.id,type:"info",closable:"",onClose:e=>a.delRole(l)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,p.zw)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),0==i.form.nodeRoleList.length?((0,t.wg)(),(0,t.j4)(g,{key:0,title:"不指定则默认所有人都可发起此审批",type:"info",closable:!1})):(0,t.kq)("",!0)])),_:1})])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,{type:"primary",onClick:a.save},{default:(0,t.w5)((()=>[ce])),_:1},8,["onClick"]),(0,t.Wm)(f,{onClick:l[5]||(l[5]=e=>i.drawer=!1)},{default:(0,t.w5)((()=>[pe])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var fe={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:le},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.isEditTitle=!1,this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},selectHandle(e,l){this.select(e,l)},delRole(e){this.form.nodeRoleList.splice(e,1)},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},toText(e){return e.nodeRoleList&&e.nodeRoleList.length>0?e.nodeRoleList.map((e=>e.name)).join("、"):"所有人"}}};const he=(0,X.Z)(fe,[["render",me]]);var we=he;const ge={class:"branch-wrap"},ke={class:"branch-box-wrap"},_e={class:"branch-box"},ye=(0,t.Uk)("添加条件"),Ce={class:"condition-node"},Ve={class:"condition-node-box"},ve=["onClick"],We=["onClick"],be={class:"title"},Ue={class:"node-title"},Ne={class:"priority-title"},Te={class:"content"},Le={key:0},xe={key:1,class:"placeholder"},De=["onClick"],je={key:1,class:"top-left-cover-line"},ze={key:2,class:"bottom-left-cover-line"},qe={key:3,class:"top-right-cover-line"},Me={key:4,class:"bottom-right-cover-line"},$e={class:"node-wrap-drawer__title"},Se=(0,t.Uk)("且"),Oe=(0,t.Uk)("或"),Re=(0,t.Uk)("移除"),Ee=(0,t.Uk)("增加条件"),He=(0,t.Uk)("保存"),Ke=(0,t.Uk)("取消");function Pe(e,l,o,d,i,a){const n=(0,t.up)("el-button"),s=(0,t.up)("el-icon-arrow-left"),r=(0,t.up)("el-icon"),u=(0,t.up)("el-icon-close"),c=(0,t.up)("el-icon-arrow-right"),f=(0,t.up)("add-node"),h=(0,t.up)("el-icon-edit"),w=(0,t.up)("el-input"),g=(0,t.up)("el-radio"),k=(0,t.up)("el-radio-group"),_=(0,t.up)("el-form-item"),y=(0,t.up)("el-divider"),C=(0,t.up)("el-table-column"),V=(0,t.up)("el-option"),v=(0,t.up)("el-select"),W=(0,t.up)("el-link"),b=(0,t.up)("el-table"),U=(0,t.up)("el-form"),N=(0,t.up)("el-main"),T=(0,t.up)("el-footer"),L=(0,t.up)("el-container"),x=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.iD)("div",ge,[(0,t._)("div",ke,[(0,t._)("div",_e,[(0,t.Wm)(n,{class:"add-branch",type:"success",plain:"",round:"",onClick:a.addTerm},{default:(0,t.w5)((()=>[ye])),_:1},8,["onClick"]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.nodeConfig.conditionNodes,((l,o)=>((0,t.wg)(),(0,t.iD)("div",{class:"col-box",key:o},[(0,t._)("div",Ce,[(0,t._)("div",Ve,[(0,t._)("div",{class:"auto-judge",onClick:e=>a.show(o)},[0!=o?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"sort-left",onClick:(0,m.iM)((e=>a.arrTransfer(o,-1)),["stop"])},[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s)])),_:1})],8,We)):(0,t.kq)("",!0),(0,t._)("div",be,[(0,t._)("span",Ue,(0,p.zw)(l.nodeName),1),(0,t._)("span",Ne,"优先级"+(0,p.zw)(l.priorityLevel),1),(0,t.Wm)(r,{class:"close",onClick:(0,m.iM)((e=>a.delTerm(o)),["stop"])},{default:(0,t.w5)((()=>[(0,t.Wm)(u)])),_:2},1032,["onClick"])]),(0,t._)("div",Te,[a.toText(i.nodeConfig,o)?((0,t.wg)(),(0,t.iD)("span",Le,(0,p.zw)(a.toText(i.nodeConfig,o)),1)):((0,t.wg)(),(0,t.iD)("span",xe,"请设置条件"))]),o!=i.nodeConfig.conditionNodes.length-1?((0,t.wg)(),(0,t.iD)("div",{key:1,class:"sort-right",onClick:(0,m.iM)((e=>a.arrTransfer(o)),["stop"])},[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c)])),_:1})],8,De)):(0,t.kq)("",!0)],8,ve),(0,t.Wm)(f,{modelValue:l.childNode,"onUpdate:modelValue":e=>l.childNode=e},null,8,["modelValue","onUpdate:modelValue"])])]),l.childNode?(0,t.WI)(e.$slots,"default",{key:0,node:l}):(0,t.kq)("",!0),0==o?((0,t.wg)(),(0,t.iD)("div",je)):(0,t.kq)("",!0),0==o?((0,t.wg)(),(0,t.iD)("div",ze)):(0,t.kq)("",!0),o==i.nodeConfig.conditionNodes.length-1?((0,t.wg)(),(0,t.iD)("div",qe)):(0,t.kq)("",!0),o==i.nodeConfig.conditionNodes.length-1?((0,t.wg)(),(0,t.iD)("div",Me)):(0,t.kq)("",!0)])))),128))]),(0,t.Wm)(f,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"])]),(0,t.Wm)(x,{title:"条件设置",modelValue:i.drawer,"onUpdate:modelValue":l[5]||(l[5]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:600},{header:(0,t.w5)((()=>[(0,t._)("div",$e,[i.isEditTitle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("label",{key:0,onClick:l[1]||(l[1]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.Uk)((0,p.zw)(i.form.nodeName),1),(0,t.Wm)(r,{class:"node-wrap-drawer__title-edit"},{default:(0,t.w5)((()=>[(0,t.Wm)(h)])),_:1})])),i.isEditTitle?((0,t.wg)(),(0,t.j4)(w,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,m.D2)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.kq)("",!0)])])),default:(0,t.w5)((()=>[(0,t.Wm)(L,null,{default:(0,t.w5)((()=>[(0,t.Wm)(N,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{"label-position":"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{label:"条件关系"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:i.form.conditionMode,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.conditionMode=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:1},{default:(0,t.w5)((()=>[Se])),_:1}),(0,t.Wm)(g,{label:2},{default:(0,t.w5)((()=>[Oe])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(y),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{data:i.form.conditionList},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{prop:"label",label:"描述"},{default:(0,t.w5)((e=>[(0,t.Wm)(w,{modelValue:e.row.label,"onUpdate:modelValue":l=>e.row.label=l,placeholder:"描述"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(C,{prop:"field",label:"条件字段",width:"130"},{default:(0,t.w5)((e=>[(0,t.Wm)(w,{modelValue:e.row.field,"onUpdate:modelValue":l=>e.row.field=l,placeholder:"条件字段"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(C,{prop:"operator",label:"运算符",width:"130"},{default:(0,t.w5)((e=>[(0,t.Wm)(v,{modelValue:e.row.operator,"onUpdate:modelValue":l=>e.row.operator=l,placeholder:"Select"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"等于",value:"="}),(0,t.Wm)(V,{label:"不等于",value:"!="}),(0,t.Wm)(V,{label:"大于",value:">"}),(0,t.Wm)(V,{label:"大于等于",value:">="}),(0,t.Wm)(V,{label:"小于",value:"<"}),(0,t.Wm)(V,{label:"小于等于",value:"<="}),(0,t.Wm)(V,{label:"包含",value:"include"}),(0,t.Wm)(V,{label:"不包含",value:"notinclude"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(C,{prop:"value",label:"值",width:"100"},{default:(0,t.w5)((e=>[(0,t.Wm)(w,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l,placeholder:"值"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(C,{prop:"value",label:"移除",width:"55"},{default:(0,t.w5)((e=>[(0,t.Wm)(W,{type:"danger",underline:!1,onClick:l=>a.deleteConditionList(e.$index)},{default:(0,t.w5)((()=>[Re])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,t._)("p",null,[(0,t.Wm)(n,{type:"primary",icon:"el-icon-plus",round:"",onClick:a.addConditionList},{default:(0,t.w5)((()=>[Ee])),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,{type:"primary",onClick:a.save},{default:(0,t.w5)((()=>[He])),_:1},8,["onClick"]),(0,t.Wm)(n,{onClick:l[4]||(l[4]=e=>i.drawer=!1)},{default:(0,t.w5)((()=>[Ke])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Ie={props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:le},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,index:0,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(e){this.index=e,this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig.conditionNodes[e])),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.nodeConfig.conditionNodes[this.index]=this.form,this.$emit("update:modelValue",this.nodeConfig),this.drawer=!1},addTerm(){let e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:3,priorityLevel:e,conditionMode:1,conditionList:[]})},delTerm(e){this.nodeConfig.conditionNodes.splice(e,1),1==this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:modelValue",this.nodeConfig.conditionNodes[0].childNode))},reData(e,l){e.childNode?this.reData(e.childNode,l):e.childNode=l},arrTransfer(e,l=1){this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+l,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map(((e,l)=>{e.priorityLevel=l+1})),this.$emit("update:modelValue",this.nodeConfig)},addConditionList(){this.form.conditionList.push({label:"",field:"",operator:"=",value:""})},deleteConditionList(e){this.form.conditionList.splice(e,1)},toText(e,l){var{conditionList:o}=e.conditionNodes[l];if(o&&1==o.length){const e=o.map((e=>`${e.label}${e.operator}${e.value}`)).join(" 和 ");return e}if(o&&o.length>1){const t=1==e.conditionNodes[l].conditionMode?"且行":"或行";return o.length+"个条件，"+t}return l==e.conditionNodes.length-1&&"其他条件进入此流程"}}};const Je=(0,X.Z)(Ie,[["render",Pe]]);var Ze=Je;const Be={class:"node-wrap"},Ge={class:"title",style:{background:"#3296fa"}},Ye={class:"content"},Ae={key:0},Fe={key:1,class:"placeholder"},Qe={class:"node-wrap-drawer__title"},Xe=(0,t.Uk)("选择人员"),el={class:"tags-list"},ll=(0,t.Uk)("保存"),ol=(0,t.Uk)("取消");function tl(e,l,o,d,i,a){const n=(0,t.up)("el-icon-promotion"),s=(0,t.up)("el-icon"),r=(0,t.up)("el-icon-close"),u=(0,t.up)("add-node"),c=(0,t.up)("el-icon-edit"),f=(0,t.up)("el-input"),h=(0,t.up)("el-button"),w=(0,t.up)("el-tag"),g=(0,t.up)("el-form-item"),k=(0,t.up)("el-checkbox"),_=(0,t.up)("el-form"),y=(0,t.up)("el-main"),C=(0,t.up)("el-footer"),V=(0,t.up)("el-container"),v=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.iD)("div",Be,[(0,t._)("div",{class:"node-wrap-box",onClick:l[1]||(l[1]=(...e)=>a.show&&a.show(...e))},[(0,t._)("div",Ge,[(0,t.Wm)(s,{class:"icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(n)])),_:1}),(0,t._)("span",null,(0,p.zw)(i.nodeConfig.nodeName),1),(0,t.Wm)(s,{class:"close",onClick:l[0]||(l[0]=(0,m.iM)((e=>a.delNode()),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(r)])),_:1})]),(0,t._)("div",Ye,[a.toText(i.nodeConfig)?((0,t.wg)(),(0,t.iD)("span",Ae,(0,p.zw)(a.toText(i.nodeConfig)),1)):((0,t.wg)(),(0,t.iD)("span",Fe,"请选择人员"))])]),(0,t.Wm)(u,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,t.Wm)(v,{title:"抄送人设置",modelValue:i.drawer,"onUpdate:modelValue":l[8]||(l[8]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,t.w5)((()=>[(0,t._)("div",Qe,[i.isEditTitle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("label",{key:0,onClick:l[3]||(l[3]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,t.Uk)((0,p.zw)(i.form.nodeName),1),(0,t.Wm)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,t.w5)((()=>[(0,t.Wm)(c)])),_:1})])),i.isEditTitle?((0,t.wg)(),(0,t.j4)(f,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,m.D2)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,t.kq)("",!0)])])),default:(0,t.w5)((()=>[(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{style:{padding:"0 20px 20px 20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{"label-position":"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"选择要抄送的人员"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[5]||(l[5]=e=>a.selectHandle(1,i.form.nodeUserList))},{default:(0,t.w5)((()=>[Xe])),_:1}),(0,t._)("div",el,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.form.nodeUserList,((e,l)=>((0,t.wg)(),(0,t.j4)(w,{key:e.id,closable:"",onClose:e=>a.delUser(l)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,p.zw)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),(0,t.Wm)(g,{label:""},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:i.form.userSelectFlag,"onUpdate:modelValue":l[6]||(l[6]=e=>i.form.userSelectFlag=e),label:"允许发起人自选抄送人"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",onClick:a.save},{default:(0,t.w5)((()=>[ll])),_:1},8,["onClick"]),(0,t.Wm)(h,{onClick:l[7]||(l[7]=e=>i.drawer=!1)},{default:(0,t.w5)((()=>[ol])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var dl={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:le},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},selectHandle(e,l){this.select(e,l)},toText(e){if(e.nodeUserList&&e.nodeUserList.length>0){const l=e.nodeUserList.map((e=>e.name)).join("、");return l}return!!e.userSelectFlag&&"发起人自选"}}};const il=(0,X.Z)(dl,[["render",tl]]);var al=il,nl={props:{modelValue:{type:Object,default:()=>{}}},components:{approver:de,promoter:we,branch:Ze,send:al},data(){return{nodeConfig:{}}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){this.nodeConfig=this.modelValue},methods:{}};const sl=(0,X.Z)(nl,[["render",c]]);var rl=sl;const ul={key:0,class:"sc-user-select"},cl={class:"sc-user-select__left"},pl={class:"sc-user-select__search"},ml={class:"sc-user-select__select"},fl={class:"sc-user-select__tree"},hl={class:"sc-user-select__user"},wl={class:"sc-user-select__user__list"},gl={class:"sc-user-select__toicon"},kl={class:"sc-user-select__selected"},_l={class:"name"},yl={class:"delete"},Cl={key:1,class:"sc-user-select sc-user-select-role"},Vl={class:"sc-user-select__left"},vl={class:"sc-user-select__select"},Wl={class:"sc-user-select__tree"},bl={class:"sc-user-select__toicon"},Ul={class:"sc-user-select__selected"},Nl={class:"name"},Tl={class:"delete"},Ll=(0,t.Uk)("取 消"),xl=(0,t.Uk)("确 认");function Dl(e,l,o,d,i,a){const n=(0,t.up)("el-button"),s=(0,t.up)("el-input"),r=(0,t.up)("el-tree"),u=(0,t.up)("el-scrollbar"),c=(0,t.up)("el-pagination"),m=(0,t.up)("el-icon-arrow-right"),f=(0,t.up)("el-icon"),h=(0,t.up)("el-avatar"),w=(0,t.up)("el-dialog"),g=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.j4)(w,{modelValue:i.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>i.dialogVisible=e),title:i.titleMap[i.type-1],width:1==i.type?680:460,"destroy-on-close":"","append-to-body":"",onClosed:l[4]||(l[4]=l=>e.$emit("closed"))},{footer:(0,t.w5)((()=>[(0,t.Wm)(n,{onClick:l[2]||(l[2]=e=>i.dialogVisible=!1)},{default:(0,t.w5)((()=>[Ll])),_:1}),(0,t.Wm)(n,{type:"primary",onClick:a.save},{default:(0,t.w5)((()=>[xl])),_:1},8,["onClick"])])),default:(0,t.w5)((()=>[1==i.type?((0,t.wg)(),(0,t.iD)("div",ul,[(0,t._)("div",cl,[(0,t._)("div",pl,[(0,t.Wm)(s,{modelValue:i.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>i.keyword=e),"prefix-icon":"el-icon-search",placeholder:"搜索成员"},{append:(0,t.w5)((()=>[(0,t.Wm)(n,{icon:"el-icon-search",onClick:a.search},null,8,["onClick"])])),_:1},8,["modelValue"])]),(0,t._)("div",ml,[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",fl,[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"menu",ref:"groupTree",data:i.group,"node-key":i.groupProps.key,props:i.groupProps,"highlight-current":"","expand-on-click-node":!1,"current-node-key":i.groupId,onNodeClick:a.groupClick},null,8,["data","node-key","props","current-node-key","onNodeClick"])])),_:1})])),[[g,i.showGrouploading]]),(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",hl,[(0,t._)("div",wl,[(0,t.Wm)(u,{ref:"userScrollbar"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"menu",ref:"userTree",data:i.user,"node-key":i.userProps.key,props:i.userProps,"default-checked-keys":a.selectedIds,"show-checkbox":"","check-on-click-node":"",onCheckChange:a.userClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1},512)]),(0,t._)("footer",null,[(0,t.Wm)(c,{background:"",layout:"prev,next",small:"",total:i.total,"page-size":i.pageSize,currentPage:i.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>i.currentPage=e),onCurrentChange:a.paginationChange},null,8,["total","page-size","currentPage","onCurrentChange"])])])),[[g,i.showUserloading]])])]),(0,t._)("div",gl,[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m)])),_:1})]),(0,t._)("div",kl,[(0,t._)("header",null,"已选 ("+(0,p.zw)(i.selected.length)+")",1),(0,t._)("ul",null,[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.selected,((e,l)=>((0,t.wg)(),(0,t.iD)("li",{key:e.id},[(0,t._)("span",_l,[(0,t.Wm)(h,{size:"small"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,p.zw)(e.name.substring(0,1)),1)])),_:2},1024),(0,t._)("label",null,(0,p.zw)(e.name),1)]),(0,t._)("span",yl,[(0,t.Wm)(n,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>a.deleteSelected(l)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,t.kq)("",!0),2==i.type?((0,t.wg)(),(0,t.iD)("div",Cl,[(0,t._)("div",Vl,[(0,t._)("div",vl,[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",Wl,[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"menu",ref:"groupTree",data:i.role,"node-key":i.roleProps.key,props:i.roleProps,"show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-checked-keys":a.selectedIds,onCheckChange:a.roleClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1})])),[[g,i.showGrouploading]])])]),(0,t._)("div",bl,[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m)])),_:1})]),(0,t._)("div",Ul,[(0,t._)("header",null,"已选 ("+(0,p.zw)(i.selected.length)+")",1),(0,t._)("ul",null,[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.selected,((e,l)=>((0,t.wg)(),(0,t.iD)("li",{key:e.id},[(0,t._)("span",Nl,[(0,t._)("label",null,(0,p.zw)(e.name),1)]),(0,t._)("span",Tl,[(0,t.Wm)(n,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>a.deleteSelected(l)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,t.kq)("",!0)])),_:1},8,["modelValue","title","width"])}var jl=o(7877),zl={successCode:200,group:{apiObj:jl.Z.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}},user:{apiObj:jl.Z.demo.page,pageSize:20,parseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},props:{key:"id",label:"user"},request:{page:"page",pageSize:"pageSize",groupId:"groupId",keyword:"keyword"}},role:{apiObj:jl.Z.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}}},ql={props:{modelValue:{type:Boolean,default:!1}},data(){return{groupProps:zl.group.props,userProps:zl.user.props,roleProps:zl.role.props,titleMap:["人员选择","角色选择"],dialogVisible:!1,showGrouploading:!1,showUserloading:!1,keyword:"",groupId:"",pageSize:zl.user.pageSize,total:0,currentPage:1,group:[],user:[],role:[],type:1,selected:[],value:[]}},computed:{selectedIds(){return this.selected.map((e=>e.id))}},mounted(){},methods:{open(e,l){this.type=e,this.value=l||[],this.selected=JSON.parse(JSON.stringify(l||[])),this.dialogVisible=!0,1==this.type?(this.getGroup(),this.getUser()):2==this.type&&this.getRole()},async getGroup(){this.showGrouploading=!0;var e=await zl.group.apiObj.get();this.showGrouploading=!1;var l={[zl.group.props.key]:"",[zl.group.props.label]:"所有"};e.data.unshift(l),this.group=zl.group.parseData(e).rows},async getUser(){this.showUserloading=!0;var e={[zl.user.request.keyword]:this.keyword||null,[zl.user.request.groupId]:this.groupId||null,[zl.user.request.page]:this.currentPage,[zl.user.request.pageSize]:this.pageSize},l=await zl.user.apiObj.get(e);this.showUserloading=!1,this.user=zl.user.parseData(l).rows,this.total=zl.user.parseData(l).total||0,this.$refs.userScrollbar.setScrollTop(0)},async getRole(){this.showGrouploading=!0;var e=await zl.role.apiObj.get();this.showGrouploading=!1,this.role=zl.role.parseData(e).rows},groupClick(e){this.keyword="",this.currentPage=1,this.groupId=e[zl.group.props.key],this.getUser()},userClick(e,l){l?this.selected.push({id:e[zl.user.props.key],name:e[zl.user.props.label]}):this.selected=this.selected.filter((l=>l.id!=e[zl.user.props.key]))},paginationChange(){this.getUser()},search(){this.groupId="",this.$refs.groupTree.setCurrentKey(this.groupId),this.currentPage=1,this.getUser()},deleteSelected(e){this.selected.splice(e,1),1==this.type?this.$refs.userTree.setCheckedKeys(this.selectedIds):2==this.type&&this.$refs.groupTree.setCheckedKeys(this.selectedIds)},roleClick(e,l){l?this.selected.push({id:e[zl.role.props.key],name:e[zl.role.props.label]}):this.selected=this.selected.filter((l=>l.id!=e[zl.role.props.key]))},save(){this.value.splice(0,this.value.length),this.selected.map((e=>{this.value.push(e)})),this.dialogVisible=!1}}};const Ml=(0,X.Z)(ql,[["render",Dl],["__scopeId","data-v-e3061d58"]]);var $l=Ml,Sl={provide(){return{select:this.selectHandle}},props:{modelValue:{type:Object,default:()=>{}}},components:{nodeWrap:rl,useSelect:$l},data(){return{nodeConfig:this.modelValue,selectVisible:!1}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){},methods:{selectHandle(e,l){this.selectVisible=!0,this.$nextTick((()=>{this.$refs.useselect.open(e,l)}))}}};const Ol=(0,X.Z)(Sl,[["render",u]]);var Rl=Ol,El={name:"workflow",components:{scWorkflow:Rl},data(){return{data:{id:1,name:"请假审批",nodeConfig:{nodeName:"发起人",type:0,nodeRoleList:[],childNode:{nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"长期",type:3,priorityLevel:1,conditionMode:1,conditionList:[{label:"请假天数",field:"day",operator:">",value:"7"}],childNode:{nodeName:"领导审批",type:1,setType:1,nodeUserList:[{id:"360000197302144442",name:"何敏"}],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}},{nodeName:"短期",type:3,priorityLevel:2,conditionMode:1,conditionList:[],childNode:{nodeName:"直接主管审批",type:1,setType:2,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}}],childNode:{nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[{id:"220000200908305857",name:"何秀英"}]}}}}}},mounted(){},methods:{exportJson(){this.$message("返回值请查看F12控制台console.log()"),console.log(this.data)}}};const Hl=(0,X.Z)(El,[["render",a]]);var Kl=Hl}}]);