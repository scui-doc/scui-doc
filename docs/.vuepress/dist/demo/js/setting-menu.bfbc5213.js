(window.webpackJsonp=window.webpackJsonp||[]).push([["setting-menu"],{"553c":function(e,t,n){"use strict";n("708e")},"708e":function(e,t,n){},c584:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"custom-tree-node el-tree-node__label"},a={class:"label"},c={class:"do"};var i=n("1da1"),u=(n("96cf"),n("4de4"),n("d3b7"),n("99af"),n("d81d"),n("159b"),n("0dc2")),s=1,l={name:"settingMenu",components:{save:u.default},data:function(){return{menuloading:!1,menuList:[],menuProps:{label:function(e){return e.meta.title}},menuFilterText:""}},watch:{menuFilterText:function(e){this.$refs.menu.filter(e)}},mounted:function(){this.getMenu()},methods:{getMenu:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuloading=!0,t.next=3,e.$API.system.menu.list.get();case 3:n=t.sent,e.menuloading=!1,e.menuList=n.data;case 6:case"end":return t.stop()}}),t)})))()},menuClick:function(e,t){var n=1==t.level?void 0:t.parent.data.id;this.$refs.save.setData(e,n),this.$refs.main.$el.scrollTop=0},menuFilterNode:function(e,t){return!e||-1!==t.meta.title.indexOf(e)},nodeDrop:function(e,t,n){this.$refs.save.setData({}),this.$message("拖拽对象：".concat(e.data.meta.title,", 释放对象：").concat(t.data.meta.title,", 释放对象的位置：").concat(n))},add:function(e,t){var n=this;return Object(i.a)(regeneratorRuntime.mark((function r(){var o,a,c,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o="未命名"+s++,a={parentId:t?t.id:"",name:o,path:"",component:"",meta:{title:o,type:"menu"}},n.menuloading=!0,r.next=5,n.$API.demo.post.post(a);case 5:c=r.sent,n.menuloading=!1,a.id=c.data,n.$refs.menu.append(a,e),n.$refs.menu.setCurrentKey(a.id),i=e?e.data.id:"",n.$refs.save.setData(a,i);case 12:case"end":return r.stop()}}),r)})))()},delMenu:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=(n=e.$refs.menu.getCheckedNodes()).length){t.next=4;break}return e.$message.warning("请选择需要删除的项"),t.abrupt("return",!1);case 4:return t.next=6,e.$confirm("确认删除已选择的菜单吗？","提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch((function(){}));case 6:if("confirm"==t.sent){t.next=9;break}return t.abrupt("return",!1);case 9:return e.menuloading=!0,r={ids:n.map((function(e){return e.id}))},t.next=13,e.$API.demo.post.post(r);case 13:o=t.sent,e.menuloading=!1,200==o.code?n.forEach((function(t){e.$refs.menu.getNode(t).isCurrent&&e.$refs.save.setData({}),e.$refs.menu.remove(t)})):e.$message.warning(o.message);case 16:case"end":return t.stop()}}),t)})))()}}},d=(n("553c"),n("6b0d"));const m=n.n(d)()(l,[["render",function(e,t,n,i,u,s){var l=Object(r.resolveComponent)("el-input"),d=Object(r.resolveComponent)("el-header"),m=Object(r.resolveComponent)("el-icon-plus"),f=Object(r.resolveComponent)("el-icon"),p=Object(r.resolveComponent)("el-tree"),b=Object(r.resolveComponent)("el-main"),O=Object(r.resolveComponent)("el-button"),j=Object(r.resolveComponent)("el-footer"),h=Object(r.resolveComponent)("el-container"),g=Object(r.resolveComponent)("el-aside"),v=Object(r.resolveComponent)("save"),C=Object(r.resolveDirective)("loading");return Object(r.openBlock)(),Object(r.createBlock)(h,null,{default:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createVNode)(g,{width:"300px"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(h,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(d,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(l,{placeholder:"输入关键字进行过滤",modelValue:u.menuFilterText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.menuFilterText=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(r.createVNode)(b,{class:"nopadding"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(p,{ref:"menu",class:"menu","node-key":"id",data:u.menuList,props:u.menuProps,draggable:"","highlight-current":"","expand-on-click-node":!1,"check-strictly":"","show-checkbox":"","filter-node-method":s.menuFilterNode,onNodeClick:s.menuClick,onNodeDrop:s.nodeDrop},{default:Object(r.withCtx)((function(e){var t=e.node,n=e.data;return[Object(r.createElementVNode)("span",o,[Object(r.createElementVNode)("span",a,Object(r.toDisplayString)(t.label),1),Object(r.createElementVNode)("span",c,[Object(r.createVNode)(f,{onClick:Object(r.withModifiers)((function(e){return s.add(t,n)}),["stop"])},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(m)]})),_:2},1032,["onClick"])])])]})),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])]})),_:1}),Object(r.createVNode)(j,{style:{height:"51px"}},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(O,{type:"primary",size:"mini",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(e){return s.add()})}),Object(r.createVNode)(O,{type:"danger",size:"mini",plain:"",icon:"el-icon-delete",onClick:s.delMenu},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},512),[[C,u.menuloading]]),Object(r.createVNode)(h,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(b,{class:"nopadding",style:{padding:"20px"},ref:"main"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(v,{ref:"save",menu:u.menuList},null,8,["menu"])]})),_:1},512)]})),_:1})]})),_:1})}],["__scopeId","data-v-2edcd6bc"]]);t.default=m}}]);