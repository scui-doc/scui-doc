(window.webpackJsonp=window.webpackJsonp||[]).push([["vab-workflow"],{"181e":function(e,t,o){"use strict";o.r(t);o("b0c0");var n=o("7a23"),c={class:"do"},l=Object(n.createTextVNode)("export JSON");var r={class:"sc-workflow-design"},i={class:"box-scale"},d=Object(n.createElementVNode)("div",{class:"end-node"},[Object(n.createElementVNode)("div",{class:"end-node-circle"}),Object(n.createElementVNode)("div",{class:"end-node-text"},"流程结束")],-1);var a={class:"node-wrap"},u={class:"title",style:{background:"#ff943e"}},s={class:"content"},b={key:0},O={key:1,class:"placeholder"},j={class:"node-wrap-drawer__title"},m=Object(n.createTextVNode)("选择人员"),p={class:"tags-list"},f=Object(n.createTextVNode)(" 发起人的第 "),V=Object(n.createTextVNode)(" 级主管 "),h=Object(n.createTextVNode)("选择角色"),C={class:"tags-list"},N=Object(n.createTextVNode)("自选一个人"),k=Object(n.createTextVNode)("自选多个人"),v=Object(n.createTextVNode)("直到最上层主管"),g=Object(n.createTextVNode)("自定义审批终点"),w={key:0},y=Object(n.createTextVNode)("直到发起人的第 "),x=Object(n.createTextVNode)(" 级主管"),_=Object(n.createTextVNode)(" 小时 "),T=Object(n.createTextVNode)("自动通过"),B=Object(n.createTextVNode)("自动拒绝"),E={style:{width:"100%"}},U=Object(n.createTextVNode)("按顺序依次审批"),L={style:{width:"100%"}},S=Object(n.createTextVNode)("会签 (可同时审批，每个人必须审批通过)"),D={style:{width:"100%"}},M=Object(n.createTextVNode)("或签 (有一人审批通过即可)"),$=Object(n.createTextVNode)("保存"),R=Object(n.createTextVNode)("取消");o("e9c4"),o("a434"),o("a15b"),o("d81d");var P={class:"add-node-btn-box"},z={class:"add-node-btn"},F={class:"add-node-popover-body"},I=Object(n.createElementVNode)("p",null,"审批节点",-1),J=Object(n.createElementVNode)("p",null,"抄送节点",-1),K=Object(n.createElementVNode)("p",null,"条件分支",-1);var G={props:{modelValue:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},methods:{addType:function(e){var t={};1==e?t={nodeName:"审核人",type:1,setType:1,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0,childNode:this.modelValue}:2==e?t={nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[],childNode:this.modelValue}:4==e&&(t={nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"条件1",type:3,priorityLevel:1,conditionMode:1,conditionList:[]},{nodeName:"条件2",type:3,priorityLevel:2,conditionMode:1,conditionList:[]}],childNode:this.modelValue}),this.$emit("update:modelValue",t)}}},H=o("6b0d"),A=o.n(H);var q=A()(G,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("el-button"),d=Object(n.resolveComponent)("el-icon-user-filled"),a=Object(n.resolveComponent)("el-icon"),u=Object(n.resolveComponent)("el-icon-promotion"),s=Object(n.resolveComponent)("el-icon-share"),b=Object(n.resolveComponent)("el-popover");return Object(n.openBlock)(),Object(n.createElementBlock)("div",P,[Object(n.createElementVNode)("div",z,[Object(n.createVNode)(b,{placement:"right-start",width:270,trigger:"click","hide-after":0,"show-after":0},{reference:Object(n.withCtx)((function(){return[Object(n.createVNode)(i,{type:"primary",icon:"el-icon-plus",circle:""})]})),default:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",F,[Object(n.createElementVNode)("ul",null,[Object(n.createElementVNode)("li",null,[Object(n.createVNode)(a,{style:{color:"#ff943e"},onClick:t[0]||(t[0]=function(e){return r.addType(1)})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(d)]})),_:1}),I]),Object(n.createElementVNode)("li",null,[Object(n.createVNode)(a,{style:{color:"#3296fa"},onClick:t[1]||(t[1]=function(e){return r.addType(2)})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(u)]})),_:1}),J]),Object(n.createElementVNode)("li",null,[Object(n.createVNode)(a,{style:{color:"#15BC83"},onClick:t[2]||(t[2]=function(e){return r.addType(4)})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(s)]})),_:1}),K])])])]})),_:1})])])}]]),W={inject:["select"],props:{modelValue:{type:Object,default:function(){}}},components:{addNode:q},data:function(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue:function(){this.nodeConfig=this.modelValue}},mounted:function(){this.nodeConfig=this.modelValue},methods:{show:function(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle:function(){var e=this;this.isEditTitle=!0,this.$nextTick((function(){e.$refs.nodeTitle.focus()}))},saveTitle:function(){this.isEditTitle=!1},save:function(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode:function(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser:function(e){this.form.nodeUserList.splice(e,1)},delRole:function(e){this.form.nodeRoleList.splice(e,1)},selectHandle:function(e,t){this.select(e,t)},toText:function(e){return 1==e.setType?!!(e.nodeUserList&&e.nodeUserList.length>0)&&e.nodeUserList.map((function(e){return e.name})).join("、"):2==e.setType?1==e.examineLevel?"直接主管":"发起人的第".concat(e.examineLevel,"级主管"):3==e.setType?!!(e.nodeRoleList&&e.nodeRoleList.length>0)&&"角色-"+e.nodeRoleList.map((function(e){return e.name})).join("、"):4==e.setType?"发起人自选":5==e.setType?"发起人自己":7==e.setType?"连续多级主管":void 0}}};var Q=A()(W,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("el-icon-user-filled"),d=Object(n.resolveComponent)("el-icon"),P=Object(n.resolveComponent)("el-icon-close"),z=Object(n.resolveComponent)("add-node"),F=Object(n.resolveComponent)("el-icon-edit"),I=Object(n.resolveComponent)("el-input"),J=Object(n.resolveComponent)("el-option"),K=Object(n.resolveComponent)("el-select"),G=Object(n.resolveComponent)("el-form-item"),H=Object(n.resolveComponent)("el-button"),A=Object(n.resolveComponent)("el-tag"),q=Object(n.resolveComponent)("el-input-number"),W=Object(n.resolveComponent)("el-radio"),Q=Object(n.resolveComponent)("el-radio-group"),X=Object(n.resolveComponent)("el-divider"),Y=Object(n.resolveComponent)("el-checkbox"),Z=Object(n.resolveComponent)("el-form"),ee=Object(n.resolveComponent)("el-main"),te=Object(n.resolveComponent)("el-footer"),oe=Object(n.resolveComponent)("el-container"),ne=Object(n.resolveComponent)("el-drawer");return Object(n.openBlock)(),Object(n.createElementBlock)("div",a,[Object(n.createElementVNode)("div",{class:"node-wrap-box",onClick:t[1]||(t[1]=function(){return r.show&&r.show.apply(r,arguments)})},[Object(n.createElementVNode)("div",u,[Object(n.createVNode)(d,{class:"icon"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(i)]})),_:1}),Object(n.createElementVNode)("span",null,Object(n.toDisplayString)(l.nodeConfig.nodeName),1),Object(n.createVNode)(d,{class:"close",onClick:t[0]||(t[0]=Object(n.withModifiers)((function(e){return r.delNode()}),["stop"]))},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(P)]})),_:1})]),Object(n.createElementVNode)("div",s,[r.toText(l.nodeConfig)?(Object(n.openBlock)(),Object(n.createElementBlock)("span",b,Object(n.toDisplayString)(r.toText(l.nodeConfig)),1)):(Object(n.openBlock)(),Object(n.createElementBlock)("span",O,"请选择"))])]),Object(n.createVNode)(z,{modelValue:l.nodeConfig.childNode,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.nodeConfig.childNode=e})},null,8,["modelValue"]),Object(n.createVNode)(ne,{title:"审批人设置",modelValue:l.drawer,"onUpdate:modelValue":t[17]||(t[17]=function(e){return l.drawer=e}),"destroy-on-close":"","append-to-body":"",size:500},{title:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",j,[l.isEditTitle?Object(n.createCommentVNode)("",!0):(Object(n.openBlock)(),Object(n.createElementBlock)("label",{key:0,onClick:t[3]||(t[3]=function(){return r.editTitle&&r.editTitle.apply(r,arguments)})},[Object(n.createTextVNode)(Object(n.toDisplayString)(l.form.nodeName),1),Object(n.createVNode)(d,{class:"node-wrap-drawer__title-edit"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(F)]})),_:1})])),l.isEditTitle?(Object(n.openBlock)(),Object(n.createBlock)(I,{key:1,ref:"nodeTitle",modelValue:l.form.nodeName,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.form.nodeName=e}),clearable:"",onBlur:r.saveTitle,onKeyup:Object(n.withKeys)(r.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):Object(n.createCommentVNode)("",!0)])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(oe,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(ee,{style:{padding:"0 20px 20px 20px"}},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Z,{"label-position":"top"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(G,{label:"审批人员类型"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(K,{modelValue:l.form.setType,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.form.setType=e})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(J,{value:1,label:"指定成员"}),Object(n.createVNode)(J,{value:2,label:"主管"}),Object(n.createVNode)(J,{value:3,label:"角色"}),Object(n.createVNode)(J,{value:4,label:"发起人自选"}),Object(n.createVNode)(J,{value:5,label:"发起人自己"}),Object(n.createVNode)(J,{value:7,label:"连续多级主管"})]})),_:1},8,["modelValue"])]})),_:1}),1==l.form.setType?(Object(n.openBlock)(),Object(n.createBlock)(G,{key:0,label:"选择成员"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(H,{type:"primary",icon:"el-icon-plus",round:"",onClick:t[6]||(t[6]=function(e){return r.selectHandle(1,l.form.nodeUserList)})},{default:Object(n.withCtx)((function(){return[m]})),_:1}),Object(n.createElementVNode)("div",p,[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.form.nodeUserList,(function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(A,{key:e.id,closable:"",onClose:function(e){return r.delUser(t)}},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.name),1)]})),_:2},1032,["onClose"])})),128))])]})),_:1})):Object(n.createCommentVNode)("",!0),2==l.form.setType?(Object(n.openBlock)(),Object(n.createBlock)(G,{key:1,label:"指定主管"},{default:Object(n.withCtx)((function(){return[f,Object(n.createVNode)(q,{modelValue:l.form.examineLevel,"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.form.examineLevel=e}),min:1},null,8,["modelValue"]),V]})),_:1})):Object(n.createCommentVNode)("",!0),3==l.form.setType?(Object(n.openBlock)(),Object(n.createBlock)(G,{key:2,label:"选择角色"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(H,{type:"primary",icon:"el-icon-plus",round:"",onClick:t[8]||(t[8]=function(e){return r.selectHandle(2,l.form.nodeRoleList)})},{default:Object(n.withCtx)((function(){return[h]})),_:1}),Object(n.createElementVNode)("div",C,[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.form.nodeRoleList,(function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(A,{key:e.id,type:"info",closable:"",onClose:function(e){return r.delRole(t)}},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.name),1)]})),_:2},1032,["onClose"])})),128))])]})),_:1})):Object(n.createCommentVNode)("",!0),4==l.form.setType?(Object(n.openBlock)(),Object(n.createBlock)(G,{key:3,label:"发起人自选"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Q,{modelValue:l.form.selectMode,"onUpdate:modelValue":t[9]||(t[9]=function(e){return l.form.selectMode=e})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(W,{label:1},{default:Object(n.withCtx)((function(){return[N]})),_:1}),Object(n.createVNode)(W,{label:2},{default:Object(n.withCtx)((function(){return[k]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):Object(n.createCommentVNode)("",!0),7==l.form.setType?(Object(n.openBlock)(),Object(n.createBlock)(G,{key:4,label:"连续主管审批终点"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Q,{modelValue:l.form.directorMode,"onUpdate:modelValue":t[10]||(t[10]=function(e){return l.form.directorMode=e})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(W,{label:0},{default:Object(n.withCtx)((function(){return[v]})),_:1}),Object(n.createVNode)(W,{label:1},{default:Object(n.withCtx)((function(){return[g]})),_:1})]})),_:1},8,["modelValue"]),1==l.form.directorMode?(Object(n.openBlock)(),Object(n.createElementBlock)("p",w,[y,Object(n.createVNode)(q,{modelValue:l.form.directorLevel,"onUpdate:modelValue":t[11]||(t[11]=function(e){return l.form.directorLevel=e}),min:1},null,8,["modelValue"]),x])):Object(n.createCommentVNode)("",!0)]})),_:1})):Object(n.createCommentVNode)("",!0),Object(n.createVNode)(X),Object(n.createVNode)(G,{label:""},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Y,{modelValue:l.form.termAuto,"onUpdate:modelValue":t[12]||(t[12]=function(e){return l.form.termAuto=e}),label:"超时自动审批"},null,8,["modelValue"])]})),_:1}),l.form.termAuto?(Object(n.openBlock)(),Object(n.createElementBlock)(n.Fragment,{key:5},[Object(n.createVNode)(G,{label:"审批期限（为 0 则不生效）"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(q,{modelValue:l.form.term,"onUpdate:modelValue":t[13]||(t[13]=function(e){return l.form.term=e}),min:0},null,8,["modelValue"]),_]})),_:1}),Object(n.createVNode)(G,{label:"审批期限超时后执行"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Q,{modelValue:l.form.termMode,"onUpdate:modelValue":t[14]||(t[14]=function(e){return l.form.termMode=e})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(W,{label:0},{default:Object(n.withCtx)((function(){return[T]})),_:1}),Object(n.createVNode)(W,{label:1},{default:Object(n.withCtx)((function(){return[B]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})],64)):Object(n.createCommentVNode)("",!0),Object(n.createVNode)(X),Object(n.createVNode)(G,{label:"多人审批时审批方式"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Q,{modelValue:l.form.examineMode,"onUpdate:modelValue":t[15]||(t[15]=function(e){return l.form.examineMode=e})},{default:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("p",E,[Object(n.createVNode)(W,{label:1},{default:Object(n.withCtx)((function(){return[U]})),_:1})]),Object(n.createElementVNode)("p",L,[Object(n.createVNode)(W,{label:2},{default:Object(n.withCtx)((function(){return[S]})),_:1})]),Object(n.createElementVNode)("p",D,[Object(n.createVNode)(W,{label:3},{default:Object(n.withCtx)((function(){return[M]})),_:1})])]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(te,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(H,{type:"primary",onClick:r.save},{default:Object(n.withCtx)((function(){return[$]})),_:1},8,["onClick"]),Object(n.createVNode)(H,{onClick:t[16]||(t[16]=function(e){return l.drawer=!1})},{default:Object(n.withCtx)((function(){return[R]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}]]),X={class:"node-wrap"},Y={class:"title",style:{background:"#576a95"}},Z={class:"content"},ee={class:"node-wrap-drawer__title"},te=Object(n.createTextVNode)("选择角色"),oe={class:"tags-list"},ne=Object(n.createTextVNode)("保存"),ce=Object(n.createTextVNode)("取消");var le={inject:["select"],props:{modelValue:{type:Object,default:function(){}}},components:{addNode:q},data:function(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue:function(){this.nodeConfig=this.modelValue}},mounted:function(){this.nodeConfig=this.modelValue},methods:{show:function(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.isEditTitle=!1,this.drawer=!0},editTitle:function(){var e=this;this.isEditTitle=!0,this.$nextTick((function(){e.$refs.nodeTitle.focus()}))},saveTitle:function(){this.isEditTitle=!1},selectHandle:function(e,t){this.select(e,t)},delRole:function(e){this.form.nodeRoleList.splice(e,1)},save:function(){this.$emit("update:modelValue",this.form),this.drawer=!1},toText:function(e){return e.nodeRoleList&&e.nodeRoleList.length>0?e.nodeRoleList.map((function(e){return e.name})).join("、"):"所有人"}}};var re=A()(le,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("el-icon-user-filled"),d=Object(n.resolveComponent)("el-icon"),a=Object(n.resolveComponent)("add-node"),u=Object(n.resolveComponent)("el-icon-edit"),s=Object(n.resolveComponent)("el-input"),b=Object(n.resolveComponent)("el-button"),O=Object(n.resolveComponent)("el-tag"),j=Object(n.resolveComponent)("el-form-item"),m=Object(n.resolveComponent)("el-alert"),p=Object(n.resolveComponent)("el-form"),f=Object(n.resolveComponent)("el-main"),V=Object(n.resolveComponent)("el-footer"),h=Object(n.resolveComponent)("el-container"),C=Object(n.resolveComponent)("el-drawer");return Object(n.openBlock)(),Object(n.createElementBlock)("div",X,[Object(n.createElementVNode)("div",{class:"node-wrap-box start-node",onClick:t[0]||(t[0]=function(){return r.show&&r.show.apply(r,arguments)})},[Object(n.createElementVNode)("div",Y,[Object(n.createVNode)(d,{class:"icon"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(i)]})),_:1}),Object(n.createElementVNode)("span",null,Object(n.toDisplayString)(l.nodeConfig.nodeName),1)]),Object(n.createElementVNode)("div",Z,[Object(n.createElementVNode)("span",null,Object(n.toDisplayString)(r.toText(l.nodeConfig)),1)])]),Object(n.createVNode)(a,{modelValue:l.nodeConfig.childNode,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.nodeConfig.childNode=e})},null,8,["modelValue"]),Object(n.createVNode)(C,{title:"发起人",modelValue:l.drawer,"onUpdate:modelValue":t[6]||(t[6]=function(e){return l.drawer=e}),"destroy-on-close":"","append-to-body":"",size:500},{title:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",ee,[l.isEditTitle?Object(n.createCommentVNode)("",!0):(Object(n.openBlock)(),Object(n.createElementBlock)("label",{key:0,onClick:t[2]||(t[2]=function(){return r.editTitle&&r.editTitle.apply(r,arguments)})},[Object(n.createTextVNode)(Object(n.toDisplayString)(l.form.nodeName),1),Object(n.createVNode)(d,{class:"node-wrap-drawer__title-edit"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(u)]})),_:1})])),l.isEditTitle?(Object(n.openBlock)(),Object(n.createBlock)(s,{key:1,ref:"nodeTitle",modelValue:l.form.nodeName,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.form.nodeName=e}),clearable:"",onBlur:r.saveTitle,onKeyup:Object(n.withKeys)(r.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):Object(n.createCommentVNode)("",!0)])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(h,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{style:{padding:"0 20px 20px 20px"}},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{"label-position":"top"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(j,{label:"谁可以发起此审批"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{type:"primary",icon:"el-icon-plus",round:"",onClick:t[4]||(t[4]=function(e){return r.selectHandle(2,l.form.nodeRoleList)})},{default:Object(n.withCtx)((function(){return[te]})),_:1}),Object(n.createElementVNode)("div",oe,[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.form.nodeRoleList,(function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(O,{key:e.id,type:"info",closable:"",onClose:function(e){return r.delRole(t)}},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.name),1)]})),_:2},1032,["onClose"])})),128))])]})),_:1}),0==l.form.nodeRoleList.length?(Object(n.openBlock)(),Object(n.createBlock)(m,{key:0,title:"不指定则默认所有人都可发起此审批",type:"info",closable:!1})):Object(n.createCommentVNode)("",!0)]})),_:1})]})),_:1}),Object(n.createVNode)(V,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{type:"primary",onClick:r.save},{default:Object(n.withCtx)((function(){return[ne]})),_:1},8,["onClick"]),Object(n.createVNode)(b,{onClick:t[5]||(t[5]=function(e){return l.drawer=!1})},{default:Object(n.withCtx)((function(){return[ce]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}]]),ie={class:"branch-wrap"},de={class:"branch-box-wrap"},ae={class:"branch-box"},ue=Object(n.createTextVNode)("添加条件"),se={class:"condition-node"},be={class:"condition-node-box"},Oe=["onClick"],je=["onClick"],me={class:"title"},pe={class:"node-title"},fe={class:"priority-title"},Ve={class:"content"},he={key:0},Ce={key:1,class:"placeholder"},Ne=["onClick"],ke={key:1,class:"top-left-cover-line"},ve={key:2,class:"bottom-left-cover-line"},ge={key:3,class:"top-right-cover-line"},we={key:4,class:"bottom-right-cover-line"},ye={class:"node-wrap-drawer__title"},xe=Object(n.createTextVNode)("且"),_e=Object(n.createTextVNode)("或"),Te=Object(n.createTextVNode)("移除"),Be=Object(n.createTextVNode)("增加条件"),Ee=Object(n.createTextVNode)("保存"),Ue=Object(n.createTextVNode)("取消");o("99af");var Le={props:{modelValue:{type:Object,default:function(){}}},components:{addNode:q},data:function(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,index:0,form:{}}},watch:{modelValue:function(){this.nodeConfig=this.modelValue}},mounted:function(){this.nodeConfig=this.modelValue},methods:{show:function(e){this.index=e,this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig.conditionNodes[e])),this.drawer=!0},editTitle:function(){var e=this;this.isEditTitle=!0,this.$nextTick((function(){e.$refs.nodeTitle.focus()}))},saveTitle:function(){this.isEditTitle=!1},save:function(){this.nodeConfig.conditionNodes[this.index]=this.form,this.$emit("update:modelValue",this.nodeConfig),this.drawer=!1},addTerm:function(){var e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:3,priorityLevel:e,conditionMode:1,conditionList:[]})},delTerm:function(e){this.nodeConfig.conditionNodes.splice(e,1),1==this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:modelValue",this.nodeConfig.conditionNodes[0].childNode))},reData:function(e,t){e.childNode?this.reData(e.childNode,t):e.childNode=t},arrTransfer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+t,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map((function(e,t){e.priorityLevel=t+1})),this.$emit("update:modelValue",this.nodeConfig)},addConditionList:function(){this.form.conditionList.push({label:"",field:"",operator:"=",value:""})},deleteConditionList:function(e){this.form.conditionList.splice(e,1)},toText:function(e,t){var o=e.conditionNodes[t].conditionList;if(o&&1==o.length)return o.map((function(e){return"".concat(e.label).concat(e.operator).concat(e.value)})).join(" 和 ");if(o&&o.length>1){var n=1==e.conditionNodes[t].conditionMode?"且行":"或行";return o.length+"个条件，"+n}return t==e.conditionNodes.length-1&&"其他条件进入此流程"}}};var Se=A()(Le,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("el-button"),d=Object(n.resolveComponent)("el-icon-arrow-left"),a=Object(n.resolveComponent)("el-icon"),u=Object(n.resolveComponent)("el-icon-close"),s=Object(n.resolveComponent)("el-icon-arrow-right"),b=Object(n.resolveComponent)("add-node"),O=Object(n.resolveComponent)("el-icon-edit"),j=Object(n.resolveComponent)("el-input"),m=Object(n.resolveComponent)("el-radio"),p=Object(n.resolveComponent)("el-radio-group"),f=Object(n.resolveComponent)("el-form-item"),V=Object(n.resolveComponent)("el-divider"),h=Object(n.resolveComponent)("el-table-column"),C=Object(n.resolveComponent)("el-option"),N=Object(n.resolveComponent)("el-select"),k=Object(n.resolveComponent)("el-link"),v=Object(n.resolveComponent)("el-table"),g=Object(n.resolveComponent)("el-form"),w=Object(n.resolveComponent)("el-main"),y=Object(n.resolveComponent)("el-footer"),x=Object(n.resolveComponent)("el-container"),_=Object(n.resolveComponent)("el-drawer");return Object(n.openBlock)(),Object(n.createElementBlock)("div",ie,[Object(n.createElementVNode)("div",de,[Object(n.createElementVNode)("div",ae,[Object(n.createVNode)(i,{class:"add-branch",type:"success",plain:"",round:"",onClick:r.addTerm},{default:Object(n.withCtx)((function(){return[ue]})),_:1},8,["onClick"]),(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.nodeConfig.conditionNodes,(function(t,o){return Object(n.openBlock)(),Object(n.createElementBlock)("div",{class:"col-box",key:o},[Object(n.createElementVNode)("div",se,[Object(n.createElementVNode)("div",be,[Object(n.createElementVNode)("div",{class:"auto-judge",onClick:function(e){return r.show(o)}},[0!=o?(Object(n.openBlock)(),Object(n.createElementBlock)("div",{key:0,class:"sort-left",onClick:Object(n.withModifiers)((function(e){return r.arrTransfer(o,-1)}),["stop"])},[Object(n.createVNode)(a,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(d)]})),_:1})],8,je)):Object(n.createCommentVNode)("",!0),Object(n.createElementVNode)("div",me,[Object(n.createElementVNode)("span",pe,Object(n.toDisplayString)(t.nodeName),1),Object(n.createElementVNode)("span",fe,"优先级"+Object(n.toDisplayString)(t.priorityLevel),1),Object(n.createVNode)(a,{class:"close",onClick:Object(n.withModifiers)((function(e){return r.delTerm(o)}),["stop"])},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(u)]})),_:2},1032,["onClick"])]),Object(n.createElementVNode)("div",Ve,[r.toText(l.nodeConfig,o)?(Object(n.openBlock)(),Object(n.createElementBlock)("span",he,Object(n.toDisplayString)(r.toText(l.nodeConfig,o)),1)):(Object(n.openBlock)(),Object(n.createElementBlock)("span",Ce,"请设置条件"))]),o!=l.nodeConfig.conditionNodes.length-1?(Object(n.openBlock)(),Object(n.createElementBlock)("div",{key:1,class:"sort-right",onClick:Object(n.withModifiers)((function(e){return r.arrTransfer(o)}),["stop"])},[Object(n.createVNode)(a,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(s)]})),_:1})],8,Ne)):Object(n.createCommentVNode)("",!0)],8,Oe),Object(n.createVNode)(b,{modelValue:t.childNode,"onUpdate:modelValue":function(e){return t.childNode=e}},null,8,["modelValue","onUpdate:modelValue"])])]),t.childNode?Object(n.renderSlot)(e.$slots,"default",{key:0,node:t}):Object(n.createCommentVNode)("",!0),0==o?(Object(n.openBlock)(),Object(n.createElementBlock)("div",ke)):Object(n.createCommentVNode)("",!0),0==o?(Object(n.openBlock)(),Object(n.createElementBlock)("div",ve)):Object(n.createCommentVNode)("",!0),o==l.nodeConfig.conditionNodes.length-1?(Object(n.openBlock)(),Object(n.createElementBlock)("div",ge)):Object(n.createCommentVNode)("",!0),o==l.nodeConfig.conditionNodes.length-1?(Object(n.openBlock)(),Object(n.createElementBlock)("div",we)):Object(n.createCommentVNode)("",!0)])})),128))]),Object(n.createVNode)(b,{modelValue:l.nodeConfig.childNode,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.nodeConfig.childNode=e})},null,8,["modelValue"])]),Object(n.createVNode)(_,{title:"条件设置",modelValue:l.drawer,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.drawer=e}),"destroy-on-close":"","append-to-body":"",size:600},{title:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",ye,[l.isEditTitle?Object(n.createCommentVNode)("",!0):(Object(n.openBlock)(),Object(n.createElementBlock)("label",{key:0,onClick:t[1]||(t[1]=function(){return r.editTitle&&r.editTitle.apply(r,arguments)})},[Object(n.createTextVNode)(Object(n.toDisplayString)(l.form.nodeName),1),Object(n.createVNode)(a,{class:"node-wrap-drawer__title-edit"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(O)]})),_:1})])),l.isEditTitle?(Object(n.openBlock)(),Object(n.createBlock)(j,{key:1,ref:"nodeTitle",modelValue:l.form.nodeName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.form.nodeName=e}),clearable:"",onBlur:r.saveTitle,onKeyup:Object(n.withKeys)(r.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):Object(n.createCommentVNode)("",!0)])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(x,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(w,{style:{padding:"0 20px 20px 20px"}},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(g,{"label-position":"top"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{label:"条件关系"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:l.form.conditionMode,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.form.conditionMode=e})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:1},{default:Object(n.withCtx)((function(){return[xe]})),_:1}),Object(n.createVNode)(m,{label:2},{default:Object(n.withCtx)((function(){return[_e]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(V),Object(n.createVNode)(f,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(v,{data:l.form.conditionList},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(h,{prop:"label",label:"描述"},{default:Object(n.withCtx)((function(e){return[Object(n.createVNode)(j,{modelValue:e.row.label,"onUpdate:modelValue":function(t){return e.row.label=t},placeholder:"描述"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n.createVNode)(h,{prop:"field",label:"条件字段",width:"130"},{default:Object(n.withCtx)((function(e){return[Object(n.createVNode)(j,{modelValue:e.row.field,"onUpdate:modelValue":function(t){return e.row.field=t},placeholder:"条件字段"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n.createVNode)(h,{prop:"operator",label:"运算符",width:"130"},{default:Object(n.withCtx)((function(e){return[Object(n.createVNode)(N,{modelValue:e.row.operator,"onUpdate:modelValue":function(t){return e.row.operator=t},placeholder:"Select"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(C,{label:"等于",value:"="}),Object(n.createVNode)(C,{label:"不等于",value:"!="}),Object(n.createVNode)(C,{label:"大于",value:">"}),Object(n.createVNode)(C,{label:"大于等于",value:">="}),Object(n.createVNode)(C,{label:"小于",value:"<"}),Object(n.createVNode)(C,{label:"小于等于",value:"<="}),Object(n.createVNode)(C,{label:"包含",value:"include"}),Object(n.createVNode)(C,{label:"不包含",value:"notinclude"})]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n.createVNode)(h,{prop:"value",label:"值",width:"100"},{default:Object(n.withCtx)((function(e){return[Object(n.createVNode)(j,{modelValue:e.row.value,"onUpdate:modelValue":function(t){return e.row.value=t},placeholder:"值"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n.createVNode)(h,{prop:"value",label:"移除",width:"55"},{default:Object(n.withCtx)((function(e){return[Object(n.createVNode)(k,{type:"danger",underline:!1,onClick:function(t){return r.deleteConditionList(e.$index)}},{default:Object(n.withCtx)((function(){return[Te]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1}),Object(n.createElementVNode)("p",null,[Object(n.createVNode)(i,{type:"primary",icon:"el-icon-plus",round:"",onClick:r.addConditionList},{default:Object(n.withCtx)((function(){return[Be]})),_:1},8,["onClick"])])]})),_:1})]})),_:1}),Object(n.createVNode)(y,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(i,{type:"primary",onClick:r.save},{default:Object(n.withCtx)((function(){return[Ee]})),_:1},8,["onClick"]),Object(n.createVNode)(i,{onClick:t[4]||(t[4]=function(e){return l.drawer=!1})},{default:Object(n.withCtx)((function(){return[Ue]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}]]),De={class:"node-wrap"},Me={class:"title",style:{background:"#3296fa"}},$e={class:"content"},Re={key:0},Pe={key:1,class:"placeholder"},ze={class:"node-wrap-drawer__title"},Fe=Object(n.createTextVNode)("选择人员"),Ie={class:"tags-list"},Je=Object(n.createTextVNode)("保存"),Ke=Object(n.createTextVNode)("取消");var Ge={inject:["select"],props:{modelValue:{type:Object,default:function(){}}},components:{addNode:q},data:function(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue:function(){this.nodeConfig=this.modelValue}},mounted:function(){this.nodeConfig=this.modelValue},methods:{show:function(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle:function(){var e=this;this.isEditTitle=!0,this.$nextTick((function(){e.$refs.nodeTitle.focus()}))},saveTitle:function(){this.isEditTitle=!1},save:function(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode:function(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser:function(e){this.form.nodeUserList.splice(e,1)},selectHandle:function(e,t){this.select(e,t)},toText:function(e){return e.nodeUserList&&e.nodeUserList.length>0?e.nodeUserList.map((function(e){return e.name})).join("、"):!!e.userSelectFlag&&"发起人自选"}}};const He=A()(Ge,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("el-icon-promotion"),d=Object(n.resolveComponent)("el-icon"),a=Object(n.resolveComponent)("el-icon-close"),u=Object(n.resolveComponent)("add-node"),s=Object(n.resolveComponent)("el-icon-edit"),b=Object(n.resolveComponent)("el-input"),O=Object(n.resolveComponent)("el-button"),j=Object(n.resolveComponent)("el-tag"),m=Object(n.resolveComponent)("el-form-item"),p=Object(n.resolveComponent)("el-checkbox"),f=Object(n.resolveComponent)("el-form"),V=Object(n.resolveComponent)("el-main"),h=Object(n.resolveComponent)("el-footer"),C=Object(n.resolveComponent)("el-container"),N=Object(n.resolveComponent)("el-drawer");return Object(n.openBlock)(),Object(n.createElementBlock)("div",De,[Object(n.createElementVNode)("div",{class:"node-wrap-box",onClick:t[1]||(t[1]=function(){return r.show&&r.show.apply(r,arguments)})},[Object(n.createElementVNode)("div",Me,[Object(n.createVNode)(d,{class:"icon"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(i)]})),_:1}),Object(n.createElementVNode)("span",null,Object(n.toDisplayString)(l.nodeConfig.nodeName),1),Object(n.createVNode)(d,{class:"close",onClick:t[0]||(t[0]=Object(n.withModifiers)((function(e){return r.delNode()}),["stop"]))},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(a)]})),_:1})]),Object(n.createElementVNode)("div",$e,[r.toText(l.nodeConfig)?(Object(n.openBlock)(),Object(n.createElementBlock)("span",Re,Object(n.toDisplayString)(r.toText(l.nodeConfig)),1)):(Object(n.openBlock)(),Object(n.createElementBlock)("span",Pe,"请选择人员"))])]),Object(n.createVNode)(u,{modelValue:l.nodeConfig.childNode,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.nodeConfig.childNode=e})},null,8,["modelValue"]),Object(n.createVNode)(N,{title:"抄送人设置",modelValue:l.drawer,"onUpdate:modelValue":t[8]||(t[8]=function(e){return l.drawer=e}),"destroy-on-close":"","append-to-body":"",size:500},{title:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",ze,[l.isEditTitle?Object(n.createCommentVNode)("",!0):(Object(n.openBlock)(),Object(n.createElementBlock)("label",{key:0,onClick:t[3]||(t[3]=function(){return r.editTitle&&r.editTitle.apply(r,arguments)})},[Object(n.createTextVNode)(Object(n.toDisplayString)(l.form.nodeName),1),Object(n.createVNode)(d,{class:"node-wrap-drawer__title-edit"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(s)]})),_:1})])),l.isEditTitle?(Object(n.openBlock)(),Object(n.createBlock)(b,{key:1,ref:"nodeTitle",modelValue:l.form.nodeName,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.form.nodeName=e}),clearable:"",onBlur:r.saveTitle,onKeyup:Object(n.withKeys)(r.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):Object(n.createCommentVNode)("",!0)])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(C,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(V,{style:{padding:"0 20px 20px 20px"}},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{"label-position":"top"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"选择要抄送的人员"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(O,{type:"primary",icon:"el-icon-plus",round:"",onClick:t[5]||(t[5]=function(e){return r.selectHandle(1,l.form.nodeUserList)})},{default:Object(n.withCtx)((function(){return[Fe]})),_:1}),Object(n.createElementVNode)("div",Ie,[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.form.nodeUserList,(function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(j,{key:e.id,closable:"",onClose:function(e){return r.delUser(t)}},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.name),1)]})),_:2},1032,["onClose"])})),128))])]})),_:1}),Object(n.createVNode)(m,{label:""},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:l.form.userSelectFlag,"onUpdate:modelValue":t[6]||(t[6]=function(e){return l.form.userSelectFlag=e}),label:"允许发起人自选抄送人"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(h,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(O,{type:"primary",onClick:r.save},{default:Object(n.withCtx)((function(){return[Je]})),_:1},8,["onClick"]),Object(n.createVNode)(O,{onClick:t[7]||(t[7]=function(e){return l.drawer=!1})},{default:Object(n.withCtx)((function(){return[Ke]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}]]);var Ae={props:{modelValue:{type:Object,default:function(){}}},components:{approver:Q,promoter:re,branch:Se,send:He},data:function(){return{nodeConfig:{}}},watch:{modelValue:function(e){this.nodeConfig=e},nodeConfig:function(e){this.$emit("update:modelValue",e)}},mounted:function(){this.nodeConfig=this.modelValue},methods:{}};var qe=A()(Ae,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("promoter"),d=Object(n.resolveComponent)("approver"),a=Object(n.resolveComponent)("send"),u=Object(n.resolveComponent)("node-wrap",!0),s=Object(n.resolveComponent)("branch");return Object(n.openBlock)(),Object(n.createElementBlock)(n.Fragment,null,[0==l.nodeConfig.type?(Object(n.openBlock)(),Object(n.createBlock)(i,{key:0,modelValue:l.nodeConfig,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.nodeConfig=e})},null,8,["modelValue"])):Object(n.createCommentVNode)("",!0),1==l.nodeConfig.type?(Object(n.openBlock)(),Object(n.createBlock)(d,{key:1,modelValue:l.nodeConfig,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.nodeConfig=e})},null,8,["modelValue"])):Object(n.createCommentVNode)("",!0),2==l.nodeConfig.type?(Object(n.openBlock)(),Object(n.createBlock)(a,{key:2,modelValue:l.nodeConfig,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.nodeConfig=e})},null,8,["modelValue"])):Object(n.createCommentVNode)("",!0),4==l.nodeConfig.type?(Object(n.openBlock)(),Object(n.createBlock)(s,{key:3,modelValue:l.nodeConfig,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.nodeConfig=e})},{default:Object(n.withCtx)((function(e){return[e.node?(Object(n.openBlock)(),Object(n.createBlock)(u,{key:0,modelValue:e.node.childNode,"onUpdate:modelValue":function(t){return e.node.childNode=t}},null,8,["modelValue","onUpdate:modelValue"])):Object(n.createCommentVNode)("",!0)]})),_:1},8,["modelValue"])):Object(n.createCommentVNode)("",!0),l.nodeConfig.childNode?(Object(n.openBlock)(),Object(n.createBlock)(u,{key:4,modelValue:l.nodeConfig.childNode,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.nodeConfig.childNode=e})},null,8,["modelValue"])):Object(n.createCommentVNode)("",!0)],64)}]]),We=(o("ac1f"),o("841c"),{key:0,class:"sc-user-select"}),Qe={class:"sc-user-select__left"},Xe={class:"sc-user-select__search"},Ye={class:"sc-user-select__select"},Ze={class:"sc-user-select__tree"},et={class:"sc-user-select__user"},tt={class:"sc-user-select__user__list"},ot={class:"sc-user-select__toicon"},nt={class:"sc-user-select__selected"},ct={class:"name"},lt={class:"delete"},rt={key:1,class:"sc-user-select sc-user-select-role"},it={class:"sc-user-select__left"},dt={class:"sc-user-select__select"},at={class:"sc-user-select__tree"},ut={class:"sc-user-select__toicon"},st={class:"sc-user-select__selected"},bt={class:"name"},Ot={class:"delete"},jt=Object(n.createTextVNode)("取 消"),mt=Object(n.createTextVNode)("确 认");var pt=o("c7eb"),ft=o("ade3"),Vt=o("1da1"),ht=(o("4de4"),o("d3b7"),o("365c")),Ct={successCode:200,group:{apiObj:ht.a.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}},user:{apiObj:ht.a.demo.page,pageSize:20,parseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},props:{key:"id",label:"user"},request:{page:"page",pageSize:"pageSize",groupId:"groupId",keyword:"keyword"}},role:{apiObj:ht.a.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}}},Nt={props:{modelValue:{type:Boolean,default:!1}},data:function(){return{groupProps:Ct.group.props,userProps:Ct.user.props,roleProps:Ct.role.props,titleMap:["人员选择","角色选择"],dialogVisible:!1,showGrouploading:!1,showUserloading:!1,keyword:"",groupId:"",pageSize:Ct.user.pageSize,total:0,currentPage:1,group:[],user:[],role:[],type:1,selected:[],value:[]}},computed:{selectedIds:function(){return this.selected.map((function(e){return e.id}))}},mounted:function(){},methods:{open:function(e,t){this.type=e,this.value=t||[],this.selected=JSON.parse(JSON.stringify(t||[])),this.dialogVisible=!0,1==this.type?(this.getGroup(),this.getUser()):2==this.type&&this.getRole()},getGroup:function(){var e=this;return Object(Vt.a)(Object(pt.a)().mark((function t(){var o,n,c;return Object(pt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showGrouploading=!0,t.next=3,Ct.group.apiObj.get();case 3:n=t.sent,e.showGrouploading=!1,o={},Object(ft.a)(o,Ct.group.props.key,""),Object(ft.a)(o,Ct.group.props.label,"所有"),c=o,n.data.unshift(c),e.group=Ct.group.parseData(n).rows;case 8:case"end":return t.stop()}}),t)})))()},getUser:function(){var e=this;return Object(Vt.a)(Object(pt.a)().mark((function t(){var o,n,c;return Object(pt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showUserloading=!0,o={},Object(ft.a)(o,Ct.user.request.keyword,e.keyword||null),Object(ft.a)(o,Ct.user.request.groupId,e.groupId||null),Object(ft.a)(o,Ct.user.request.page,e.currentPage),Object(ft.a)(o,Ct.user.request.pageSize,e.pageSize),n=o,t.next=4,Ct.user.apiObj.get(n);case 4:c=t.sent,e.showUserloading=!1,e.user=Ct.user.parseData(c).rows,e.total=Ct.user.parseData(c).total||0,e.$refs.userScrollbar.setScrollTop(0);case 9:case"end":return t.stop()}}),t)})))()},getRole:function(){var e=this;return Object(Vt.a)(Object(pt.a)().mark((function t(){var o;return Object(pt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showGrouploading=!0,t.next=3,Ct.role.apiObj.get();case 3:o=t.sent,e.showGrouploading=!1,e.role=Ct.role.parseData(o).rows;case 6:case"end":return t.stop()}}),t)})))()},groupClick:function(e){this.keyword="",this.currentPage=1,this.groupId=e[Ct.group.props.key],this.getUser()},userClick:function(e,t){t?this.selected.push({id:e[Ct.user.props.key],name:e[Ct.user.props.label]}):this.selected=this.selected.filter((function(t){return t.id!=e[Ct.user.props.key]}))},paginationChange:function(){this.getUser()},search:function(){this.groupId="",this.$refs.groupTree.setCurrentKey(this.groupId),this.currentPage=1,this.getUser()},deleteSelected:function(e){this.selected.splice(e,1),1==this.type?this.$refs.userTree.setCheckedKeys(this.selectedIds):2==this.type&&this.$refs.groupTree.setCheckedKeys(this.selectedIds)},roleClick:function(e,t){t?this.selected.push({id:e[Ct.role.props.key],name:e[Ct.role.props.label]}):this.selected=this.selected.filter((function(t){return t.id!=e[Ct.role.props.key]}))},save:function(){var e=this;this.value.splice(0,this.value.length),this.selected.map((function(t){e.value.push(t)})),this.dialogVisible=!1}}};o("90c3");const kt=A()(Nt,[["render",function(e,t,o,c,l,r){var i=Object(n.resolveComponent)("el-button"),d=Object(n.resolveComponent)("el-input"),a=Object(n.resolveComponent)("el-tree"),u=Object(n.resolveComponent)("el-scrollbar"),s=Object(n.resolveComponent)("el-pagination"),b=Object(n.resolveComponent)("el-icon-arrow-right"),O=Object(n.resolveComponent)("el-icon"),j=Object(n.resolveComponent)("el-avatar"),m=Object(n.resolveComponent)("el-dialog"),p=Object(n.resolveDirective)("loading");return Object(n.openBlock)(),Object(n.createBlock)(m,{modelValue:l.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.dialogVisible=e}),title:l.titleMap[l.type-1],width:1==l.type?680:460,"destroy-on-close":"","append-to-body":"",onClosed:t[4]||(t[4]=function(t){return e.$emit("closed")})},{footer:Object(n.withCtx)((function(){return[Object(n.createVNode)(i,{onClick:t[2]||(t[2]=function(e){return l.dialogVisible=!1})},{default:Object(n.withCtx)((function(){return[jt]})),_:1}),Object(n.createVNode)(i,{type:"primary",onClick:r.save},{default:Object(n.withCtx)((function(){return[mt]})),_:1},8,["onClick"])]})),default:Object(n.withCtx)((function(){return[1==l.type?(Object(n.openBlock)(),Object(n.createElementBlock)("div",We,[Object(n.createElementVNode)("div",Qe,[Object(n.createElementVNode)("div",Xe,[Object(n.createVNode)(d,{modelValue:l.keyword,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.keyword=e}),"prefix-icon":"el-icon-search",placeholder:"搜索成员"},{append:Object(n.withCtx)((function(){return[Object(n.createVNode)(i,{icon:"el-icon-search",onClick:r.search},null,8,["onClick"])]})),_:1},8,["modelValue"])]),Object(n.createElementVNode)("div",Ye,[Object(n.withDirectives)((Object(n.openBlock)(),Object(n.createElementBlock)("div",Ze,[Object(n.createVNode)(u,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(a,{class:"menu",ref:"groupTree",data:l.group,"node-key":l.groupProps.key,props:l.groupProps,"highlight-current":"","expand-on-click-node":!1,"current-node-key":l.groupId,onNodeClick:r.groupClick},null,8,["data","node-key","props","current-node-key","onNodeClick"])]})),_:1})])),[[p,l.showGrouploading]]),Object(n.withDirectives)((Object(n.openBlock)(),Object(n.createElementBlock)("div",et,[Object(n.createElementVNode)("div",tt,[Object(n.createVNode)(u,{ref:"userScrollbar"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(a,{class:"menu",ref:"userTree",data:l.user,"node-key":l.userProps.key,props:l.userProps,"default-checked-keys":r.selectedIds,"show-checkbox":"","check-on-click-node":"",onCheckChange:r.userClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])]})),_:1},512)]),Object(n.createElementVNode)("footer",null,[Object(n.createVNode)(s,{background:"",layout:"prev,next",small:"",total:l.total,"page-size":l.pageSize,currentPage:l.currentPage,"onUpdate:currentPage":t[1]||(t[1]=function(e){return l.currentPage=e}),onCurrentChange:r.paginationChange},null,8,["total","page-size","currentPage","onCurrentChange"])])])),[[p,l.showUserloading]])])]),Object(n.createElementVNode)("div",ot,[Object(n.createVNode)(O,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b)]})),_:1})]),Object(n.createElementVNode)("div",nt,[Object(n.createElementVNode)("header",null,"已选 ("+Object(n.toDisplayString)(l.selected.length)+")",1),Object(n.createElementVNode)("ul",null,[Object(n.createVNode)(u,null,{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.selected,(function(e,t){return Object(n.openBlock)(),Object(n.createElementBlock)("li",{key:e.id},[Object(n.createElementVNode)("span",ct,[Object(n.createVNode)(j,{size:"small"},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.name.substring(0,1)),1)]})),_:2},1024),Object(n.createElementVNode)("label",null,Object(n.toDisplayString)(e.name),1)]),Object(n.createElementVNode)("span",lt,[Object(n.createVNode)(i,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:function(e){return r.deleteSelected(t)}},null,8,["onClick"])])])})),128))]})),_:1})])])])):Object(n.createCommentVNode)("",!0),2==l.type?(Object(n.openBlock)(),Object(n.createElementBlock)("div",rt,[Object(n.createElementVNode)("div",it,[Object(n.createElementVNode)("div",dt,[Object(n.withDirectives)((Object(n.openBlock)(),Object(n.createElementBlock)("div",at,[Object(n.createVNode)(u,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(a,{class:"menu",ref:"groupTree",data:l.role,"node-key":l.roleProps.key,props:l.roleProps,"show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-checked-keys":r.selectedIds,onCheckChange:r.roleClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])]})),_:1})])),[[p,l.showGrouploading]])])]),Object(n.createElementVNode)("div",ut,[Object(n.createVNode)(O,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b)]})),_:1})]),Object(n.createElementVNode)("div",st,[Object(n.createElementVNode)("header",null,"已选 ("+Object(n.toDisplayString)(l.selected.length)+")",1),Object(n.createElementVNode)("ul",null,[Object(n.createVNode)(u,null,{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(l.selected,(function(e,t){return Object(n.openBlock)(),Object(n.createElementBlock)("li",{key:e.id},[Object(n.createElementVNode)("span",bt,[Object(n.createElementVNode)("label",null,Object(n.toDisplayString)(e.name),1)]),Object(n.createElementVNode)("span",Ot,[Object(n.createVNode)(i,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:function(e){return r.deleteSelected(t)}},null,8,["onClick"])])])})),128))]})),_:1})])])])):Object(n.createCommentVNode)("",!0)]})),_:1},8,["modelValue","title","width"])}],["__scopeId","data-v-e3061d58"]]);var vt={provide:function(){return{select:this.selectHandle}},props:{modelValue:{type:Object,default:function(){}}},components:{nodeWrap:qe,useSelect:kt},data:function(){return{nodeConfig:this.modelValue,selectVisible:!1}},watch:{modelValue:function(e){this.nodeConfig=e},nodeConfig:function(e){this.$emit("update:modelValue",e)}},mounted:function(){},methods:{selectHandle:function(e,t){var o=this;this.selectVisible=!0,this.$nextTick((function(){o.$refs.useselect.open(e,t)}))}}};o("1f25");var gt={name:"workflow",components:{scWorkflow:A()(vt,[["render",function(e,t,o,c,l,a){var u=Object(n.resolveComponent)("node-wrap"),s=Object(n.resolveComponent)("use-select");return Object(n.openBlock)(),Object(n.createElementBlock)("div",r,[Object(n.createElementVNode)("div",i,[l.nodeConfig?(Object(n.openBlock)(),Object(n.createBlock)(u,{key:0,modelValue:l.nodeConfig,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.nodeConfig=e})},null,8,["modelValue"])):Object(n.createCommentVNode)("",!0),d]),l.selectVisible?(Object(n.openBlock)(),Object(n.createBlock)(s,{key:0,ref:"useselect",onClosed:t[1]||(t[1]=function(e){return l.selectVisible=!1})},null,512)):Object(n.createCommentVNode)("",!0)])}]])},data:function(){return{data:{id:1,name:"请假审批",nodeConfig:{nodeName:"发起人",type:0,nodeRoleList:[],childNode:{nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"长期",type:3,priorityLevel:1,conditionMode:1,conditionList:[{label:"请假天数",field:"day",operator:">",value:"7"}],childNode:{nodeName:"领导审批",type:1,setType:1,nodeUserList:[{id:"360000197302144442",name:"何敏"}],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}},{nodeName:"短期",type:3,priorityLevel:2,conditionMode:1,conditionList:[],childNode:{nodeName:"直接主管审批",type:1,setType:2,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}}],childNode:{nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[{id:"220000200908305857",name:"何秀英"}]}}}}}},mounted:function(){},methods:{exportJson:function(){this.$message("返回值请查看F12控制台console.log()"),console.log(this.data)}}};const wt=A()(gt,[["render",function(e,t,o,r,i,d){var a=Object(n.resolveComponent)("el-page-header"),u=Object(n.resolveComponent)("el-button"),s=Object(n.resolveComponent)("el-header"),b=Object(n.resolveComponent)("sc-workflow"),O=Object(n.resolveComponent)("el-main"),j=Object(n.resolveComponent)("el-container");return Object(n.openBlock)(),Object(n.createBlock)(j,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(s,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(a,{content:i.data.name},null,8,["content"]),Object(n.createElementVNode)("div",c,[Object(n.createVNode)(u,{type:"primary",onClick:d.exportJson},{default:Object(n.withCtx)((function(){return[l]})),_:1},8,["onClick"])])]})),_:1}),Object(n.createVNode)(O,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{modelValue:i.data.nodeConfig,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.data.nodeConfig=e})},null,8,["modelValue"])]})),_:1})]})),_:1})}]]);t.default=wt},"1f25":function(e,t,o){"use strict";o("c200")},"8c47":function(e,t,o){},"90c3":function(e,t,o){"use strict";o("8c47")},c200:function(e,t,o){}}]);